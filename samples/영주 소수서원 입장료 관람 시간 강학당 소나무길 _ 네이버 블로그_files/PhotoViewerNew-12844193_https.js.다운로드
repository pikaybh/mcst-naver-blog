PhotoViewerNew=(function(){function v(I,G,K,L,F,H){try{PhotoViewerNew.mylogBaEventSender=I;PhotoViewerNew.beyondAnalyticsUrl=G;PhotoViewerNew.userKey=K;PhotoViewerNew.blogNo=blogNo;PhotoViewerNew.currentImageIndex=0;PhotoViewerNew.postFilesDomainList=F?j(F):[];PhotoViewerNew.blogFilesDomainList=H?j(H):[];PhotoViewerNew.socialPluginInfoList=L?j(L):[];PhotoViewerNew.socialPluginInfo=PhotoViewerNew.socialPluginInfoList[0];PhotoViewerNew.logNo=PhotoViewerNew.socialPluginInfoList[0].logNo;PhotoViewerNew.splugin_oninitialize_for_photo_viewer=C;PhotoViewerNew.isShowSharePopup=false;c();PhotoViewerNew.seViewers=h();PhotoViewerNew.photoViewer=b();y();E()}catch(J){console.log("PhotoViewerNew init fail.",J)}}function c(){for(var I=0;I<PhotoViewerNew.socialPluginInfoList.length;I++){var F=PhotoViewerNew.socialPluginInfoList[I];var M="#post-view"+F.logNo;var L=document.querySelectorAll(M+" img");for(var H=0;H<L.length;H++){var G=L[H];G.socialPluginInfo=F;G.addEventListener("click",function(){PhotoViewerNew.socialPluginInfo=this.socialPluginInfo;PhotoViewerNew.logNo=this.socialPluginInfo.logNo;setTimeout(function(){var N=document.querySelector(".splugin-overlay.naver-splugin.spi_sns_share");N.setAttribute("data-oninitialize","PhotoViewerNew.splugin_oninitialize_for_photo_viewer();")},10)})}var K=document.querySelectorAll(M+" video");for(var H=0;H<K.length;H++){var J=K[H];if(D(J.getAttribute("data-gif-url"))){continue}J.socialPluginInfo=F;J.addEventListener("click",function(){PhotoViewerNew.socialPluginInfo=this.socialPluginInfo;PhotoViewerNew.logNo=this.socialPluginInfo.logNo;setTimeout(function(){var N=document.querySelector(".splugin-overlay.naver-splugin.spi_sns_share");N.setAttribute("data-oninitialize","PhotoViewerNew.splugin_oninitialize_for_photo_viewer();")},10)})}}}function t(){try{c();PhotoViewerNew.seViewers=h();PhotoViewerNew.photoViewer=b();y();E()}catch(F){console.log("PhotoViewerNew init fail.",F)}}function h(){var F=[];var I=document.querySelectorAll(".se-viewer, .se_doc_viewer, .post-body");if(!I){return[]}for(var G=0;G<I.length;G++){var H=I[G];if(H.classList.contains("post-body")&&!!H.querySelector(".se-viewer")||!!H.querySelector(".se_doc_viewer")){continue}var J="";if(H.querySelector(".se-section-documentTitle .pcol1")){J=H.querySelector(".se-section-documentTitle .pcol1").textContent.trim()}if(H.querySelector(".se_title .se_textarea")){J=H.querySelector(".se_title .se_textarea").textContent.trim()}if(H.querySelector(".htitle .pcol1")){J=H.querySelector(".htitle .pcol1").textContent.trim()}if(!J){continue}H.titleText=J;F.push(H)}return F}function b(){var F=new PhotoViewer.Viewer({imageGallery:f(),urlCallback:function(G){PhotoViewerNew.currentImageIndex=G;var H=parent?parent.location:location;if(PhotoViewerNew.seViewers.length>1||H.pathname=="/"+PhotoViewerNew.socialPluginInfo.domainIdOrBlogId||H.pathname.indexOf("/PostList.naver")>-1){return}r(G)},useNlogScript:false,});F.addPlugin(i());F.on(l());return F}function l(){var F={};F[PhotoViewer.Event.CLOSED]=function(){q()};F[PhotoViewer.Event.OPENED]=function(){nclk_v2(this,"pst.image","","");PhotoViewerNew.mylogBaEventSender.photoViewer(PhotoViewerNew.beyondAnalyticsUrl,PhotoViewerNew.userKey,PhotoViewerNew.blogNo,PhotoViewerNew.logNo)};F[PhotoViewer.NlogEvent.LIST_CLOSE]=function(){nclk_v2(this,"bpv.listclose","","")};F[PhotoViewer.NlogEvent.LIST_OPEN]=function(){nclk_v2(this,"bpv.listopen","","")};F[PhotoViewer.NlogEvent.SHARE]=function(){nclk_v2(this,"bpv.share","","")};F[PhotoViewer.NlogEvent.BPV_CLOSE]=function(){nclk_v2(this,"bpv.close","","")};F[PhotoViewer.NlogEvent.IMG_CLOSE]=function(){nclk_v2(this,"img.close","","");if(PhotoViewerNew.isShowSharePopup){window.__splugin.hide()}else{PhotoViewerNew.photoViewer.close()}};F[PhotoViewer.NlogEvent.IMG_RIGHTMOUSE]=function(){nclk_v2(this,"img.rightmouse","","")};F[PhotoViewer.NlogEvent.CLICK_PREVIOUS]=function(){nclk_v2(this,"bpv.previous","","")};F[PhotoViewer.NlogEvent.CLICK_NEXT]=function(){nclk_v2(this,"bpv.next","","")};F[PhotoViewer.Event.ZOOMOUT]=function(){nclk_v2(this,"bpv.zoomout","","")};F[PhotoViewer.Event.ZOOMIN]=function(){nclk_v2(this,"bpv.zoomin","","")};F[PhotoViewer.Event.SETSIZE]=function(){nclk_v2(this,"bpv.setsize","","")};F[PhotoViewer.Event.MOVEPOST]=function(){nclk_v2(this,"bpv.movepost","","")};F[PhotoViewer.Event.LIST_IMG]=function(){nclk_v2(this,"bpv.listimg","","")};F[PhotoViewer.Event.SCROLL_ZOOM_OUT]=function(){nclk_v2(this,"bpv.scrollzoomout","","")};F[PhotoViewer.Event.SCROLL_ZOOM_IN]=function(){nclk_v2(this,"bpv.scrollzoomin","","")};F[PhotoViewer.Event.SCROLL_RIGHT]=function(){nclk_v2(this,"bpv.scrollright","","")};F[PhotoViewer.Event.SCROLL_LEFT]=function(){nclk_v2(this,"bpv.scrollleft","","")};F[PhotoViewer.Event.KEYBOARD_PREVIOUS]=function(){nclk_v2(this,"bpv.keyboardprevious","","")};F[PhotoViewer.Event.KEYBOARD_NEXT]=function(){nclk_v2(this,"bpv.keyboardnext","","")};F[PhotoViewer.Event.KEYBOARD_ESC]=function(){if(PhotoViewerNew.isShowSharePopup){window.__splugin.hide()}else{PhotoViewerNew.photoViewer.close()}};return F}function r(F){var H=parent?parent.location:location;var I=A(H.href,"photoView",F);var G=H.protocol+"//"+H.host+H.pathname+I;if(!!parent){parent.history.replaceState(null,null,G)}else{history.replaceState(null,null,G)}}function q(){var G=parent?parent.location:location;var H=d(G.href,"photoView");var F=G.protocol+"//"+G.host+G.pathname+H;if(!!parent){parent.history.replaceState(null,null,F)}else{history.replaceState(null,null,F)}}function i(){return new PhotoViewer.ShareButton({onClick:function(F){},initialize:function(G){var H=G.dataset;H.style="unity";H.option=JSON.stringify({layerPosition:"outside-bottom",align:"right",top:13.7,left:-4,});var F=C();if(window.SocialPlugIn_Core){window.__splugin=window.SocialPlugIn_Core(F);window.__splugin.init(G);window.__splugin.update(G,F)}}})}function C(){var G=parent?parent.location:location;var F=G.protocol+"//"+G.host+"/"+PhotoViewerNew.socialPluginInfo.domainIdOrBlogId+"/"+PhotoViewerNew.socialPluginInfo.logNo+"?photoView="+PhotoViewerNew.currentImageIndex;return{evKey:"blog",serviceName:"블로그",url:F,title:PhotoViewerNew.socialPluginInfo.title,sourceName:PhotoViewerNew.socialPluginInfo.blogName,darkMode:false,onClick:function(){},onShow:function(){PhotoViewerNew.isShowSharePopup=true},onHide:function(){PhotoViewerNew.isShowSharePopup=false},blog:{display:PhotoViewerNew.socialPluginInfo.blogDisplay?"on":"off",proxyUrl:encodeURI("/ScrapToBlog.naver?blogId="+PhotoViewerNew.socialPluginInfo.domainIdOrBlogId+"&logNo="+PhotoViewerNew.socialPluginInfo.logNo),},cafe:{display:PhotoViewerNew.socialPluginInfo.cafeDisplay?"on":"off",proxyUrl:encodeURI("/ScrapToCafe.naver?inAppNavigation=true&blogId="+PhotoViewerNew.socialPluginInfo.domainIdOrBlogId+"&logNo="+PhotoViewerNew.socialPluginInfo.logNo+"&source_type=111&title="+PhotoViewerNew.socialPluginInfo.title+"&source_title=블로그>"+PhotoViewerNew.socialPluginInfo.blogName+" | "+PhotoViewerNew.socialPluginInfo.nicknameOrBlogId+"&source_url="+F),},mail:{display:PhotoViewerNew.socialPluginInfo.outsideDisplay?"on":"off",url:F,},band:{display:PhotoViewerNew.socialPluginInfo.outsideDisplay?"on":"off",url:F,},x:{display:PhotoViewerNew.socialPluginInfo.outsideDisplay?"on":"off",url:F,},facebook:{display:PhotoViewerNew.socialPluginInfo.outsideDisplay?"on":"off",url:F,},memo:{display:"on",title:PhotoViewerNew.socialPluginInfo.title,url:F,},keep:{display:"on",url:F,},kakaotalk:{display:"on",url:F,},copyurl:{display:"on",url:F,}}}function y(){for(var G=0;G<PhotoViewerNew.seViewers.length;G++){var I="post_"+G;var F=0;var H=PhotoViewerNew.seViewers[G];if(H.classList.contains("se-viewer")){e(I,F,H)}else{if(H.classList.contains("se_doc_viewer")){w(I,F,H)}else{if(H.classList.contains("post-body")){x(I,F,H)}}}}}function e(P,N,R){var O=R.querySelectorAll(".se-component.se-image, .se-component.se-imageStrip, .se-component.se-wrappingParagraph, .se-section-imageGroup, .se-component.se-text, .se-component.se-table");for(var K=0;K<O.length;K++){var I=O[K];var G=I.querySelectorAll(".se-module.se-module-image, .se-inline-image");if(I.classList.contains("se-text")||I.classList.contains("se-table")){G=I.querySelectorAll(".se-inline-image")}for(var J=0;J<G.length;J++){var M=G[J];var L=M.querySelector(".se-module.se-module-image img");var F=M.querySelector(".se-module.se-module-image video");var H=M.querySelector("a")&&!!j(M.querySelector("a").getAttribute("data-linkdata")).link;if(L){var Q=L.getAttribute("src");if(D(Q)){continue}L.photoViewerPostId=P;L.photoViewerImageIndex=N++;if(H){continue}L.addEventListener("click",B)}if(F){var S=F.getAttribute("data-gif-url");if(D(S)){continue}F.photoViewerPostId=P;F.photoViewerImageIndex=N++;if(H){continue}F.addEventListener("click",B)}}}}function w(P,N,R){var O=R.querySelectorAll(".se_component.se_image, .se_component.se_imageStrip");for(var K=0;K<O.length;K++){var I=O[K];var G=I.querySelectorAll(".se_mediaArea, .se_imageStripArea");for(var J=0;J<G.length;J++){var M=G[J];var L=M.querySelector("img");var F=M.querySelector("video");var H=M.getAttribute("data-linkdata")&&!!j(M.getAttribute("data-linkdata")).link;if(M.classList.contains("se_mediaArea")&&!!M.querySelector(".se_imageStripArea")){continue}if(L){var Q=L.getAttribute("src");if(D(Q)){continue}L.photoViewerPostId=P;L.photoViewerImageIndex=N++;if(H){continue}L.addEventListener("click",B)}if(F){var S=F.getAttribute("data-gif-url");if(D(S)){continue}F.photoViewerPostId=P;F.photoViewerImageIndex=N++;if(H){continue}F.addEventListener("click",B)}}}}function x(M,L,O){var G=O.querySelectorAll("blockquote img, img._photoImage, img.fx, video._photoImage._gifmp4");for(var I=0;I<G.length;I++){var K=G[I];var J=!K.classList.contains("_gifmp4")?K:false;var F=K.classList.contains("_gifmp4")?K:false;var H=K.parentNode.getAttribute("href");if(J){var N=J.getAttribute("src");if(D(N)){continue}J.photoViewerPostId=M;J.photoViewerImageIndex=L++;if(H){continue}J.addEventListener("click",B)}if(F){var P=F.getAttribute("data-gif-url");if(D(P)){continue}F.photoViewerPostId=M;F.photoViewerImageIndex=L++;if(H){continue}F.addEventListener("click",B)}}}function B(){PhotoViewerNew.photoViewer.view(this.photoViewerPostId,this.photoViewerImageIndex)}function E(){var G=new URLSearchParams(location.search);var F=G.get("photoView");if(F){if(parent&&parent.document.querySelector("#mainFrame")){parent.document.querySelector("#mainFrame").focus()}PhotoViewerNew.photoViewer.view("post_0",F,{scrollOnClose:true})}}function f(){var H={};for(var G=0;G<PhotoViewerNew.seViewers.length;G++){var F="post_"+G;var I=PhotoViewerNew.seViewers[G];if(I.classList.contains("se-viewer")){p(F,I,H)}else{if(I.classList.contains("se_doc_viewer")){k(F,I,H)}else{if(I.classList.contains("post-body")){m(F,I,H)}}}}return H}function p(K,V,H){var L=V.querySelectorAll(".se-component.se-image, .se-component.se-imageStrip, .se-component.se-wrappingParagraph, .se-section-imageGroup, .se-component.se-text, .se-component.se-table");for(var Q=0;Q<L.length;Q++){var N=L[Q];var O=N.querySelectorAll(".se-module.se-module-image, .se-inline-image");if(N.classList.contains("se-text")||N.classList.contains("se-table")){O=N.querySelectorAll(".se-inline-image")}var S=N.querySelector(".se-module.se-module-text.se-caption");for(var P=0;P<O.length;P++){var J=O[P];var X=J.querySelector("img");var R=J.querySelector("video");var M=(N.classList.contains("se-l-slide"))?N.id:N.id+"_"+P;var G=J.querySelector("a")&&!!j(J.querySelector("a").getAttribute("data-linkdata")).link;var W=G?j(J.querySelector("a").getAttribute("data-linkdata")).link:"";if(X){if(X.getAttribute("id")){M=X.getAttribute("id")}else{X.setAttribute("id",M)}var T=X.getAttribute("src");if(D(T)){continue}if(!H[K]){H[K]=[]}var U={orgUrl:s(T),thumbUrl:o(T),caption:{title:V.titleText,},type:"image",scrollId:M,};if(G){U.attachLink=W}H[K].push(U)}else{if(R){if(R.getAttribute("id")){M=R.getAttribute("id")}else{R.setAttribute("id",M)}var F=R.getAttribute("data-gif-url");if(D(F)){continue}var I=R.getAttribute("src");var F=R.getAttribute("data-gif-url");if(!I){continue}if(!H[K]){H[K]=[]}var U={orgUrl:s(F),thumbUrl:o(F),caption:{title:V.titleText,},type:"image",scrollId:M,};if(G){U.attachLink=W}H[K].push(U)}}}}}function k(K,U,H){var L=U.querySelectorAll(".se_component.se_image, .se_component.se_imageStrip");for(var P=0;P<L.length;P++){var M=L[P];var N=M.querySelectorAll(".se_mediaArea, .se_imageStripArea");var R=M.querySelector(".se_textarea");for(var O=0;O<N.length;O++){var J=N[O];var G=J.getAttribute("data-linkdata")&&!!j(J.getAttribute("data-linkdata")).link;var V=G?j(J.getAttribute("data-linkdata")).link:"";if(J.classList.contains("se_mediaArea")&&!!J.querySelector(".se_imageStripArea")){continue}var W=J.querySelector("img");var Q=J.querySelector("video");if(W){var S=W.getAttribute("src");if(D(S)){continue}if(!H[K]){H[K]=[]}var T={orgUrl:s(S),thumbUrl:o(S),caption:{title:U.titleText,},type:"image",scrollId:W.id,};if(G){T.attachLink=V}H[K].push(T)}else{if(Q){var F=Q.getAttribute("data-gif-url");if(D(F)){continue}var I=Q.getAttribute("src");var F=Q.getAttribute("data-gif-url");Q.id=j(J.getAttribute("data-linkdata")).imgId;if(!I){continue}if(!H[K]){H[K]=[]}var T={orgUrl:s(F),thumbUrl:o(F),caption:{title:U.titleText,},type:"image",scrollId:Q.id,};if(G){T.attachLink=V}H[K].push(T)}}}}}function m(H,R,M){var G=R.querySelectorAll("blockquote img, img._photoImage, img.fx, video._photoImage._gifmp4");for(var K=0;K<G.length;K++){var N=G[K];var L=!N.classList.contains("_gifmp4")?N:false;var F=N.classList.contains("_gifmp4")?N:false;var Q=Math.round(Math.random()*100000000);var J=N.parentNode.getAttribute("href");if(L){if(L.getAttribute("id")){Q=L.getAttribute("id")}else{L.setAttribute("id",Q)}var P=L.getAttribute("src");if(D(P)){continue}if(!M[H]){M[H]=[]}var I={orgUrl:s(P),thumbUrl:o(P),caption:{title:R.titleText,},type:"image",scrollId:Q,};if(J){I.attachLink=J}M[H].push(I)}else{if(F){if(F.getAttribute("id")){Q=F.getAttribute("id")}else{F.setAttribute("id",Q)}var S=F.getAttribute("data-gif-url");if(D(S)){continue}var O=F.getAttribute("src");var S=F.getAttribute("data-gif-url");if(!O){continue}if(!M[H]){M[H]=[]}var I={orgUrl:s(S),thumbUrl:o(S),caption:{title:R.titleText,},type:"image",scrollId:Q,};if(J){I.attachLink=J}M[H].push(I)}}}}function s(F){return a(F,"w3840")}function o(F){return a(F,"f100_webp")}function a(G,F){if(z(G)){return encodeURIComponent(G)}var H=A(G,"type",F);if(G.indexOf("?")>-1){return encodeURIComponent(G.split("?")[0]+H)}return encodeURIComponent(G+H)}function A(F,G,I){var H=g(F,G);H.push(G+"="+I);return H.length>0?"?"+H.join("&"):""}function d(F,G){var H=g(F,G);return H.length>0?"?"+H.join("&"):""}function g(G,I){if(!G||G.split("?").length<=1){return[]}var J=G.split("?")[1].split("&");var K=[];for(var H=0;H<J.length;H++){var F=J[H].split("=")[0];if(F!=I){K.push(J[H])}}return K}function z(F){return !n(F)&&!u(F)}function n(F){for(var G=0;G<PhotoViewerNew.postFilesDomainList.length;G++){if(F.indexOf(PhotoViewerNew.postFilesDomainList[G])>-1){return true}}return false}function u(F){for(var G=0;G<PhotoViewerNew.blogFilesDomainList.length;G++){if(F.indexOf(PhotoViewerNew.blogFilesDomainList[G])>-1){return true}}return false}function D(F){if(!F){return true}return F.indexOf("://ssl.pstatic.net/static/blank.gif")>-1||F.indexOf("://beta.blogfiles.naver.net/static/blank.gif")>-1||F.indexOf("://beta.ssl.phinf.net/blogfiles/static/blank.gif")>-1||F.indexOf("://beta.ssl.phinf.net/mblogvideo/static/blank.gif")>-1}function j(G){try{return JSON.parse(G)}catch(F){return{}}}return{init:v,reload:t,}})();if(typeof(window.defineNHNJS)=="undefined"){window.defineNHNJS={}}window.defineNHNJS["PhotoViewerNew-12844193_js"]=true;
