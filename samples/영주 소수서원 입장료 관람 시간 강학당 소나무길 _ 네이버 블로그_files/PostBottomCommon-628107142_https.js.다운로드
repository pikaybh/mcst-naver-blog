var postCommon={};if(typeof window.nhn=="undefined"){window.nhn={}}if(!nhn.husky){nhn.husky={}}postCommon.ListTable=$Class({_bFirstTopListOpen:false,bCheckAll:false,listData:null,TOP:"top",$init:function(){this.setListTableTemplate();this.elTopList=isMemolog?$("toplist"):$("toplistWrapper");this.elBottomList=$("postListBottom");this.elTopListMenu=$("toplistmenu");this.elTopListBtn=$("toplistBtn");this.elTopListBtnImg=$("topListBtnImg");this.elTopListSpanBlind=$("toplistSpanBlind")},toggleTopList:function(a){if(!this.elTopList){return}if(!$Element(this.elTopList).visible()){if(a){nclk_v2(a.element,"cat.listopen","","")}this._showTopList()}else{if(a){nclk_v2(a.element,"cat.listclose","","")}this._hideTopList()}},syncPage:function(){nPostListCount=pagePerPostCount;nPostPage=currentPage;nTopListCount=this.getCurrentTopListCount();return(isThumbnailList?1:Math.ceil((nPostListCount*nPostPage-(nPostListCount-1))/nTopListCount))},_showTopList:function(){if(!this._bFirstTopListOpen){this._bFirstTopListOpen=true;this.currentPage=userTopListCurrentPage||this.syncPage()||1;this.loadPostList({countPerPage:this.getCurrentTopListCount(),currentPage:this.currentPage})}$Element(this.elTopList).show();if(this.elTopListMenu){$Element(this.elTopListMenu).show()}if(this.elTopListBtn){$Element(this.elTopListBtn).html("목록닫기")}if(this.elTopListSpanBlind){$Element(this.elTopListSpanBlind).html("목록닫기")}if(this.elTopListBtnImg){var a=$Element(this.elTopListBtnImg);a.addClass("ico1");a.removeClass("ico2")}},_hideTopList:function(){$Element(this.elTopList).hide();if(this.elTopListMenu){$Element(this.elTopListMenu).hide()}if(this.elTopListBtn){$Element(this.elTopListBtn).html("목록열기")}if(this.elTopListSpanBlind){$Element(this.elTopListSpanBlind).html("목록열기")}if(this.elTopListBtnImg){var a=$Element(this.elTopListBtnImg);a.removeClass("ico1");a.addClass("ico2")}this.checkAllPost(false);this._resetTagEdit()},_resetTagEdit:function(){var c,b,a;c=$$("a._cancelTag",this.elTopList);for(b=0,a=c.length;b<a;b++){if($Element(c[b].parentNode).visible()){$Element(c[b]).fireEvent("click")}}c=b=a=null},_getListApiUrl:function(a,b){return"/PostTitleListAsync.naver?blogId="+blogId+"&viewdate="+viewDate+"&currentPage="+a+"&categoryNo="+categoryNo+"&parentCategoryNo="+parentCategoryNo+(b?"&countPerPage="+b:"")},loadPostList:function(d){var g,b,f,e,c,a;g=d.logNo||"";b=d.isFirstPage;f=d.currentPage||1;e=d.countPerPage;c=$Fn(this._onResponseTopList,this).bind();a=this._getListApiUrl(f,e)+(b?"&isFirstPage="+b:"");new $Ajax(a,{method:"get",onerror:function(){},onload:c}).request();g=b=f=e=c=a=null},goPageList:function(b,a){this.currentPage=b;this._nHeightTopList=this.elTopList.offsetHeight;this.loadPostList({currentPage:this.currentPage,countPerPage:this.getCurrentTopListCount()})},getCurrentTopListCount:function(){var a=$("changeListCount");return !a?userTopListCount||topListPostCount:cssquery.getSingle("#changeListCount .option[area-selected = 'true']").getAttribute("data-value")},setCurrentListCount:function(b){var a=$("changeListCount");if(!a){return}$Element(cssquery.getSingle("#changeListCount .option[data-value='"+b+"']")).attr("area-selected","true");a=null},_onResponseTopList:function(a){if(a.text().indexOf("resultCode")<0){return false}var b=function(){return new Function("return "+$S(a.text()).trim())()}();if(b.resultCode!="S"){return}this.listData=b.postList;this._makeListTable(b);if(b.isTagEnabled&&blogOwner){postListTag.loadTagListTableInfo(b.tagQueryString)}this.setCurrentListCount(b.countPerPage);if(blogOwner){this.toggleListTopManager(true)}if(userTopListManageOpen&&!this.bFirstOpenList){this.bFirstOpenList=true;this.openListTopManager()}if(this._bPageFirstLoad){if(focusing){focusing.gotoTagForPost("post_1")}this._bPageFirstLoad=false}if(this._nHeightTopList!=0){nDiffHeight=this._nHeightTopList-this.elTopList.offsetHeight;if(isParentExist()){parent.scrollBy(0,-nDiffHeight)}this._nHeightTopList=0}if(this._isSelectTag){$("listCountToggle").focus();this._isSelectTag=false}},setListTableTemplate:function(){var a=$("categoryTitle")?$("categoryTitle").text+" 글 목록":"";this.aTopListHead=[];this.aTopListBody=[];this.aTopListFooter=[];this.aTopListHead.push('<form method="post" name="listTopForm" id="listTopForm">');this.aTopListHead.push('<input type="hidden" name="logNoStruct" id="logNoStruct" /><input type="hidden" value="'+blogId+'" name="blogId" />');this.aTopListHead.push('<input type="hidden" value="'+blogNo+'" name="paperNo"/><input type="hidden" value="'+categoryNo+'" name="categoryNo"/><input type="hidden" value="" name="dstCategory"/>');this.aTopListHead.push('<input type="hidden" value="" name="dstCategoryName"/><input type="hidden" value="'+blogId+'" name="chtagname"/><input type="hidden" name="logType" value="mylog"/>');this.aTopListHead.push('<table cellspacing="0" cellpadding="0" class="blog2_list blog2_categorylist" summary="'+a+'">');this.aTopListHead.push('<caption><span class="blind">'+a+"</span></caption>");this.aTopListHead.push("<colgroup>");this.aTopListHead.push('<col class="title">');if(blogOwner){this.aTopListHead.push('<col class="read">')}this.aTopListHead.push('<col class="date">');this.aTopListHead.push("</colgroup>");this.aTopListHead.push("<thead><tr>");this.aTopListHead.push('<th scope="col">');this.aTopListHead.push('<div class="wrap_td">');if(blogOwner){this.aTopListHead.push('<span class="wrap_checkbox">');this.aTopListHead.push('<input type="checkbox" class="checkbox _checkAllPost" id="checkall"><label for="checkall"><span class="blind">전체 선택</span><i class="icon pcol2"></i></label>');this.aTopListHead.push("</span>")}this.aTopListHead.push('<span class="title pcol2">글 제목</span><i class="cline"></i>');this.aTopListHead.push("</div></th>");if(blogOwner){this.aTopListHead.push('<th scope="col">');this.aTopListHead.push('<div class="wrap_td"><span class="read pcol2">조회수</span><i class="cline"></i></div>');this.aTopListHead.push("</th>")}this.aTopListHead.push('<th scope="col"><div class="wrap_td"><span class="date pcol2">작성일</span><i class="cline"></i></div></th>');this.aTopListHead.push("</tr></thead>");this.aTopListHead.push("<tbody>");this.aTopListBody.push('<tr class="#{POST_SELETED}">');this.aTopListBody.push('<td class="title">');this.aTopListBody.push('<div class="wrap_td">');this.aTopListBody.push('<div class="meta_data">');this.aTopListBody.push('<span class="num pcol3">');this.aTopListBody.push("#{COMMENT_COUNT_AREA}");this.aTopListBody.push("</span>");this.aTopListBody.push("#{MARKET_ICON}");this.aTopListBody.push("#{VIEW_ICON}");this.aTopListBody.push("#{SEARCH_ICON}");this.aTopListBody.push("</div>");this.aTopListBody.push('<span class="ell2 pcol2">');if(blogOwner){this.aTopListBody.push('<span class="wrap_checkbox">');this.aTopListBody.push('<input type="checkbox" class="checkbox _checkPost" id="#{INPUT_TAG_ID}" name="logNo" value="#{LOG_NO}" onclick="nclk_v2(this,\'cat.selectpost\',\'\',\'\');" #{LOG_DISABLED}><label for="#{INPUT_TAG_ID}"><span class="blind">글 선택</span><i class="icon pcol2"></i></label>');this.aTopListBody.push('<input type="checkbox" name="catNo" value="#{CATE_NO}" style="display:none;" #{LOG_DISABLED} />');this.aTopListBody.push('<input type="hidden" name="sourceCode" value="#{SOURCE_CODE}">');this.aTopListBody.push('<input type="hidden" name="sellerServiceStatus" value="#{SELLER_SERVICE_STATUS}">');this.aTopListBody.push("</span>")}this.aTopListBody.push('<a href="'+blogURL+"/PostView.naver?blogId="+blogId+"&logNo=#{LOG_NO}&categoryNo=#{CATE_NO}&parentCategoryNo=#{PARENT_CATE_NO}&viewDate="+viewDate+"&currentPage=#{CURRENT_PAGE}&postListTopCurrentPage="+postListTopCurrentPage+"&from="+from+'" class="pcol2 _setTop _setTopListUrl">');this.aTopListBody.push("#{TITLE}");this.aTopListBody.push("</a></span>");this.aTopListBody.push('<i class="cline"></i>');this.aTopListBody.push("</div>");this.aTopListBody.push("</td>");if(blogOwner){this.aTopListBody.push('<td class="read">');this.aTopListBody.push('<div class="wrap_td">');this.aTopListBody.push('<a href="'+commonStatDailyURL+'/blog/article/#{LOG_NO}/cv" target="_blank" class="pcol2 aggregate_click_delegate">#{READ_CNT}</a>');this.aTopListBody.push('<i class="cline"></i>');this.aTopListBody.push("</div>");this.aTopListBody.push("</td>")}this.aTopListBody.push('<td class="date">');this.aTopListBody.push('<div class="wrap_td">');this.aTopListBody.push('<span class="date pcol2">#{DATE}</span>');this.aTopListBody.push('<i class="cline"></i>');this.aTopListBody.push("</div>");this.aTopListBody.push("</td>");this.aTopListBody.push("</tr>");if(blogOwner){this.aTopListBody.push('<tr class="tr_tag"><td colspan="3"><div class="wrap_td">');this.aTopListBody.push('<div class="wrap_tag" id="tagTopName_#{LOG_NO}" #{LOG_BLIND}>');this.aTopListBody.push('<p class="text pcol2">작성된 태그가 없습니다.</p>');this.aTopListBody.push('<a href="#" class="btn pcol2 _returnFalse _showTagEditBox _tagRosRestrict _param(EDIT|#{LOG_NO}|TOP|INSERT)">태그달기<i class="aline"></i></a>');this.aTopListBody.push("</div>");this.aTopListBody.push('<div class="wrap_tag" style="display:none">');this.aTopListBody.push('<span class="wrap_input_text">');this.aTopListBody.push('<input type="text" class="input_text pcol2" title="태그를 입력하세요." value="">');this.aTopListBody.push('<i class="aline pcol2"></i><i class="pcol2b"></i></span>');this.aTopListBody.push('<span class="wrap_btn"><a href="#" class="btn pcol2 _cancelTag _returnFalse _param(TOP|#{LOG_NO})">취소<i class="aline"></i></a>');this.aTopListBody.push('<a href="#" class="btn pcol2 _saveTag _returnFalse _param(TOP|#{LOG_NO})" onclick="nclk_v2(this,\'cat_tag.editok\',\'\',\'\');">확인<i class="aline"></i></a></span>');this.aTopListBody.push("</div>");this.aTopListBody.push('<i class="cline"></i></div></td></tr>')}this.aTopListFooter.push("</tbody>");this.aTopListFooter.push("</table></form>");this.aTopListFooter.push('<div class="wrap_ctrl _listbtn">');if(blogOwner){this.aTopListFooter.push('<div class="area_btn">');this.aTopListFooter.push('<a href="#" class="btn_ctrl_toggle pcol2 _toggleListTopManager _rosRestrict _returnFalse" role="button" id="btnSwitchManager">');this.aTopListFooter.push('<span class="txt">글관리 열기</span>');this.aTopListFooter.push('<i class="aline"></i>');this.aTopListFooter.push("</a>");this.aTopListFooter.push('<div class="area_btn_ctrl pcol2" id="listManagerWrapper" style="display:none">');this.aTopListFooter.push('<a href="#" class="btn_ctrl pcol2 _cfmAuthUpdatePost _rosRestrict _returnFalse">설정 변경<i class="aline"></i></a>');this.aTopListFooter.push('<a href="#" class="btn_ctrl pcol2 _cfmPostRegistTagName _rosRestrict _tagRosRestrict _returnFalse">태그달기<i class="aline"></i></a>');this.aTopListFooter.push('<a href="#" class="btn_ctrl pcol2 _cfmMovePost _rosRestrict _returnFalse" role="button">이동<i class="aline"></i></a>');this.aTopListFooter.push('<a href="#" class="btn_ctrl pcol2 _cfmDeletePost _rosRestrict _returnFalse" role="button">삭제<i class="aline"></i></a>');this.aTopListFooter.push('<i class="aline"></i>');this.aTopListFooter.push("</div></div>")}this.aTopListFooter.push('<div class="area_btn2">');this.aTopListFooter.push('<div class="area_select">');this.aTopListFooter.push('<a  href="#" role="button" class="btn_select pcol2 _ListCountToggle _returnFalse" id ="listCountToggle" area-haspopup="true" area-expanded="false">');this.aTopListFooter.push('<span class="txt" id="listCountView">');this.aTopListFooter.push("#{LIST_COUNT}");this.aTopListFooter.push("줄 보기</span>");this.aTopListFooter.push('<i class="aline"></i><i class="icon"></i>');this.aTopListFooter.push("</a>");this.aTopListFooter.push('<div class="dropdown_select _changeListCount" id="changeListCount" area-hidden="true">');this.aTopListFooter.push('<a href="#" class="option _returnFalse aggregate_click_delegate" area-selected="false" data-value="5">5줄 보기</a>');this.aTopListFooter.push('<a href="#" class="option _returnFalse aggregate_click_delegate" area-selected="false" data-value="10">10줄 보기</a>');this.aTopListFooter.push('<a href="#" class="option _returnFalse aggregate_click_delegate" area-selected="false" data-value="15">15줄 보기</a>');this.aTopListFooter.push('<a href="#" class="option _returnFalse aggregate_click_delegate" area-selected="false" data-value="20">20줄 보기</a>');this.aTopListFooter.push('<a href="#" class="option _returnFalse aggregate_click_delegate" area-selected="false" data-value="30">30줄 보기</a>');this.aTopListFooter.push('<i class="aline"></i>');this.aTopListFooter.push("</div></div></div>");this.aTopListFooter.push("</div>");this.aTopListFooter.push('<div class="wrap_blog2_paginate">');this.aTopListFooter.push("#{PAGING}");this.aTopListFooter.push("</div>");this.aTopListFooter.push("</div>")},_makeListTable:function(s){var e,m,p,j,g,l,k,x,b,t,a,q,r,v,c,u,z,o,n,y,h,f,d,w;e=[];m=this.aTopListHead;p=this.aTopListBody;j=this.aTopListFooter;if(categoryName){e.push(m.join("").replace(/#\{CATEGORY_NAME\}/g,utility.decodeURIComponentForJava(categoryName)))}else{e.push(m.join(""))}g=s.postList;l=s.parameters.categoryNo;k=s.parameters.parentCategoryNo;x=s.parameters.currentPage;d=1;z='<span class="icon_round pcol2">#{ICON_NAME}<i class="aline"></i></span>';if(g){for(v=0,c=g.length;v<c;v++){o=g[v];n=p.join("");w="chk"+d;d=d+1;switch(o.postProductStatus){case"ON_SALE":r="판매중";f='<span class="icon_round OnSale">#{ICON_NAME}<i class="aline"></i></span>';f=f.replace(/#\{ICON_NAME\}/g,r);n=n.replace(/#\{MARKET_ICON\}/g,f);break;case"BE_SCHEDULED":r="판매예정";f='<span class="icon_round pcol2">#{ICON_NAME}<i class="aline"></i></span>';f=f.replace(/#\{ICON_NAME\}/g,r);n=n.replace(/#\{MARKET_ICON\}/g,f);break;case"SALE_END":r="판매종료";f='<span class="icon_round icon_market pcol2 fil5">#{ICON_NAME}<i class="aline"></i></span>';f=f.replace(/#\{ICON_NAME\}/g,r);n=n.replace(/#\{MARKET_ICON\}/g,f);break;default:n=n.replace(/#\{MARKET_ICON\}/g,"")}if(o.searchYn=="false"&&blogOwner&&o.openType=="2"){r="검색비허용";y=z;y=y.replace(/#\{ICON_NAME\}/g,r);n=n.replace(/#\{SEARCH_ICON\}/g,y)}else{n=n.replace(/#\{SEARCH_ICON\}/g,"")}if(o.isPostNotOpen=="1"){r="비공개";n=n.replace(/#\{VIEW_ICON\}/g,z)}else{switch(o.openType){case"1":r="이웃공개";n=n.replace(/#\{VIEW_ICON\}/g,z);break;case"3":r="서로이웃공개";n=n.replace(/#\{VIEW_ICON\}/g,z);break;case"0":r="비공개";n=n.replace(/#\{VIEW_ICON\}/g,z);break;default:n=n.replace(/#\{VIEW_ICON\}/g,"")}}if(o.isBlockTmpForced=="1"){n=n.replace(/#\{LOG_BLIND\}/g,(o.isPostSelectable=="1"?'style="display:none;"':""))}n=n.replace(/#\{INPUT_TAG_ID\}/g,w);n=n.replace(/#\{LOG_DISABLED\}/g,(o.isPostSelectable=="1"?"isblocked=true":""));n=n.replace(/#\{LOG_NO\}/g,o.logNo);n=n.replace(/#\{CURRENT_PAGE\}/g,x);n=n.replace(/#\{CATE_NO\}/g,l);n=n.replace(/#\{TITLE\}/g,utility.decodeURIComponentForJava(o.title));n=n.replace(/#\{READ_CNT\}/g,o.readCount);n=n.replace(/#\{DATE\}/g,o.addDate);n=n.replace(/#\{SOURCE_CODE\}/g,o.sourceCode);n=n.replace(/#\{ICON_NAME\}/g,r);n=n.replace(/#\{COMMENT_COUNT_AREA\}/g,(o.commentCount!=""?"(<span>#{COMMENT_COUNT}</span>)".replace(/#\{COMMENT_COUNT\}/g,o.commentCount):""));n=n.replace(/#\{POST_SELETED\}/g,search_logNo==o.logNo?"on":"");n=n.replace(/#\{PARENT_CATE_NO\}/g,k);n=n.replace(/#\{SELLER_SERVICE_STATUS\}/g,o.sellerServiceStatus);e.push(n)}}u=j.join("");u=u.replace(/#\{LIST_COUNT\}/g,this.getCurrentTopListCount());u=u.replace(/#\{PAGING\}/g,s.pagingHtml);e.push(u);if(this.elTopList){$Element(this.elTopList).html(e.join(""))}m=p=j=g=l=k=x=b=t=a=q=r=v=c=u=z=o=n=y=h=e=null},getListLogNo:function(){var a,f,d,c,e,b;a=$("listTopForm");f=$$("input[type=checkbox][name=logNo]",a);d=[];c=f.length;for(e=0;e<c;e++){b=f[e];if(b.checked){d.push("&logNo=");d.push(b.value)}}a=f=c=e=b=null;return d.join("")},checkAllPost:function(d){var b,c,f,a,e;b=$("listTopForm");c=$("checkall");f=$$("input[name=logNo][type=checkbox][disabled=false]",b);a=f.length;this.bCheckAll=typeof d=="boolean"?d:c.checked;for(e=0;e<a;e++){f[e].checked=this.bCheckAll}if(c){c.checked=this.bCheckAll}if(!isMemolog){this.changeCheckboxAll(c,f)}b=c=f=a=e=null},changeCheckboxAll:function(b,d){var a,c;a=d.length;if(a===0){return}for(c=0;c<a;c++){this.changeCheckbox(d[c])}this.changeCheckbox(b)},changeCheckbox:function(b){var a=$Element(b.parentNode);if(b.checked){a.addClass("checked");return}a.removeClass("checked")},changeListCountView:function(a){var c=$(a.element);var b=cssquery.getSingle("#changeListCount .option[area-selected = 'true']");$Element(b).attr("area-selected","false");$Element(c).attr("area-selected","true")},toggleListCountView:function(c){var e=$(c.element);var d=$Element(cssquery.getSingle("!a",e)?cssquery.getSingle("!a",e):e);var a=d.next();var b=d.attr("area-expanded")=="false";d.attr("area-expanded",b);d[b?"addClass":"removeClass"]("on");a.attr("area-hidden",!b);a[b?"addClass":"removeClass"]("on")},closesListCountView:function(){var b=$Element("listCountToggle");if(!$Element("listCountToggle")){return}var a=b.next();b.removeClass("on");b.attr("area-expanded","false");a.attr("area-hidden","true");a.removeClass("on")},toggleListTopManager:function(b,a){if(isMemolog){this.toggleListTopManagerForMemo(b,a);return}var c=b?false:true;if(!$Element(this.elTopList).hasClass("show-list-manager-mode")==c){if(a){nclk_v2(a.element,"cat.settingopen","","")}this.openListTopManager()}else{if(a){nclk_v2(a.element,"cat.settingclose","","")}this.closeListTopManager()}c=null},openListTopManager:function(){this.toggleManagerBtn(false);var a=$("listManagerWrapper");if(a){$Element(this.elTopList).addClass("show-list-manager-mode");a.style.display="block"}if(!tagMarkDisplayIfPostTagEmpty&&!$Element(this.elTopList).hasClass("disable-tag")){$Element(this.elTopList).addClass("disable-tag")}},closeListTopManager:function(){this.toggleManagerBtn(true);var a=$("listManagerWrapper");if(a){$Element(this.elTopList).removeClass("show-list-manager-mode");a.style.display="none"}this.checkAllPost(false);this._resetTagEdit()},toggleManagerBtn:function(b){var c=$Element($("btnSwitchManager"));var a=c.child()[0];a.html(b?"글관리 열기":"글관리 닫기")},toggleListTopManagerForMemo:function(b,a){var c=$Element("memologFoText");var d=b?false:true;if(!$Element(this.elTopList).hasClass("show-list-manager-mode")==d){if(a){nclk_v2(a.element,"cat.settingopen","","")}this.openListTopManagerForMemo();c.hide()}else{if(a){nclk_v2(a.element,"cat.settingclose","","")}this.closeListTopManagerForMemo();c.show()}d=null},openListTopManagerForMemo:function(){$Element(this.elTopList).addClass("show-list-manager-mode");$Element($$.getSingle("._listbtn")).addClass("opn");if(!tagMarkDisplayIfPostTagEmpty&&!$Element(this.elTopList).hasClass("disable-tag")){$Element(this.elTopList).addClass("disable-tag")}},closeListTopManagerForMemo:function(){$Element(this.elTopList).removeClass("show-list-manager-mode");$Element($$.getSingle("._listbtn")).removeClass("opn");this.checkAllPost(false);this._resetTagEdit()},getCheckboxChecked:function(){return $$("input[name=logNo][type=checkbox][checked=true]",$("listTopForm"))},getCheckboxCheckedExceptBlocked:function(){return $$("input[name=logNo][type=checkbox][checked=true][isblocked!=true]",$("listTopForm"))},cfmPostRegistTagName:function(){var b=this.getCheckboxChecked().length;var a=$$("input[name=logNo][type=checkbox]",$("listTopForm")).length;if(b>0){window.open((isMemolog?"/memo/MemologPostTagRegistConfirm.naver":"/PostTagRegistConfirm.naver")+"?blogId="+blogId+"&cnt="+a,"_postTagCfm","width=400,height=190")}else{alert("글을 선택하세요.")}b=null},cfmAuthUpdatePost:function(){var b=this.checkedServiceStatus();if(b!==""){if(b==="TEMPORARY_STOP"){alert("판매자 정보 일시 제외 상태에서는 마켓글의 설정 변경이 불가합니다.")}else{if(b==="LEAVE_REQUEST"){alert("판매자 탈퇴 신청 상태에서는 마켓글의 설정 변경이 불가합니다.")}else{if(b==="TRADE_INTERRUPTION"){alert("판매자 탈퇴 신청 상태에서는 마켓글의 설정 변경이 불가합니다.")}}}return}if(this.getCheckboxChecked().length>0){if(this.getCheckboxCheckedExceptBlocked().length==0){alert("이용이 제한된 글은 설정이 변경되지 않습니다.");return}var d=this.getCheckboxChecked();var e="";for(var c=0;c<d.length;c++){var a=d[c].value;if(!a||a==="undefined"){continue}e+="&logNoStruct="+a}window._nBlogPageId=utility.getRandNumber();window.open("/MultiplePostOptionsUpdateForm.naver?blogId="+blogId+e,"_postAuthUpdateCfm","top=100px, left=100px, width=495px, height=280px, scrollbars=yes, resizable=yes")}else{alert("글을 선택하세요.")}},cfmMovePost:function(){var a=this.checkedServiceStatus();if(a!==""){if(a==="TEMPORARY_STOP"){alert("판매자 정보 일시 제외 상태에서는 마켓글 이동이 불가합니다.");return}if(a==="LEAVE_REQUEST"){alert("판매자 탈퇴 신청 상태에서는 마켓글의 이동이 불가합니다.");return}if(a==="TRADE_INTERRUPTION"){alert("판매자 탈퇴 신청 상태에서는 마켓글의 이동이 불가합니다.");return}}if(this.getCheckboxChecked().length>0){window.open((isMemolog?"/memo/MemologPostCategoryMoveForm.naver":"/PostCategoryMoveForm.naver")+"?blogId="+blogId,"_postMoveCfm","width=330,height=270")}else{alert("글을 선택하세요.")}nCheckedCnt=null},cfmDeletePost:function(){var b=this.checkedServiceStatus();if(b!==""){if(b==="TEMPORARY_STOP"){alert("판매자 정보 일시 제외 상태에서는 해당 기능을 사용할 수 없습니다. ");return}}var a,d,e,c;e=[];c=[];aElChecked=this.getCheckboxChecked();a=aElChecked.length;for(d=0;d<a;d++){e.push($$.getSingle("~input[type=hidden][name=sourceCode]",aElChecked[d]).value);c.push(aElChecked[d].value)}$("logNoStruct").value=utility.arrays2JsonStr(["logNo","sourceCode"],[c,e]);if(a>0){window.open(isMemolog?"/post/memologPostDeleteConfirm.jsp":"/post/postDeleteConfirm.jsp","_postDeleteCfm","width=330,height=190")}else{alert("글을 선택하세요.")}a=d=e=c=null},checkedServiceStatus:function(){var e=this.getCheckboxChecked();var d=[];var c=e.length;for(var a=0;a<c;a++){var f=$$.getSingle("~input[type=hidden][name=sellerServiceStatus]",e[a]);if(!f||f==="undefined"){continue}d.push(f.value)}for(var a=0;a<d.length;a++){var b=d[a];if("TEMPORARY_STOP"===b){return"TEMPORARY_STOP"}if("LEAVE_REQUEST"===b){return"LEAVE_REQUEST"}if("TRADE_INTERRUPTION"===b){return"TRADE_INTERRUPTION"}}return""},changeListCount:function(b){var c=b.element;var d=$("listCountView");if(this.isNotChangeSelect(c)){this.closesListCountView();return}this.changeListCountView(b);d.innerHTML=this.getCurrentTopListCount()+"줄 보기";if($Element(c).hasClass("option")&&(b.type=="click")){var a=this.getCurrentTopListCount();nclk_v2(b.element,"cat.show"+a,"","");this._isSelectTag=true;this.loadPostList({logNo:this.topLog,countPerPage:a})}},isNotChangeSelect:function(a){var c=$(a);var b=cssquery.getSingle("#changeListCount .option[area-selected = 'true']");return $Element(b).attr("data-value")==$Element(c).attr("data-value")},checkBlock:function(a){if(penalty.isBlocked()){penalty.showMessage();a.stop();return false}return true}});postCommon.View=$Class({COMMENT:"1",RELAY:"2",SYMPATHY:"3",$init:function(){this.deleteNo=null;this.arrChkopen=["0","0","0","0","0","0","0","0","0","0","0"];this.arrChkopen[0]="1";this.setSendPost()},resizeAllPosts:function(){var c=document.getElementsByName("outerDL");for(var b=0,a=c.length;b<a;b++){this.resizePost(c[b])}},resizePost:function(c){if(c){this.elDl=c}else{c=this.elDl}try{this.dd=$$.getSingle("dd",c);this.dt=$$.getSingle("dt",c);var d=$Element(c);var b=$Element(this.dd);var g=$Element(this.dt);d.css({width:"100%"});var a=d.width();if(a!=0&&g.width()==a){weldd.css({width:"100%"})}else{b.width(d.width()-g.width()-Math.abs(parseInt(g.css("marginLeft"),10)+parseInt(g.css("marginRight"),10)))}if(b.width()==""||b.width()==0){setTimeout($Fn(function(){this.resizePost()},this).bind(),100)}}catch(f){setTimeout($Fn(function(){try{this.resizePost()}catch(e){}},this).bind(),100)}},relayControl:function(a,e,b){if(blockType==2||blockType==6){alert("이 게시물은 게시중단 되어\n엮인글 열람 및 작성이 불가합니다.");return}if(a){nclk_v2(a.element,"res.replyopen","","")}var d=window.open("","relayList","width=610,height=964,scrollbars=yes");if(popupEnableChecker.checkOpenedWindowAndAlertWhenDisabledStatus(d,userAgentUtil.isIPadRequest())){var c=$("relayListForm");if(c==null){c=document.createElement("form");c.id="relayListForm";document.body.appendChild(c)}c.target="relayList";c.method="post";c.action=blogURL+"/PostRelayList.naver?blogId="+blogId+"&fno="+e+"&logNo="+b+"&isPopup=true";c.submit()}else{d.close()}},cmtControl:function(a,n,b,e,j,c,h,m){var o="201";a=a+"";var l=$("sympathyFrm"+b);var d=$Element(l);var k=d.visible();switch(a){case this.COMMENT:if(e==2||e==6){alert("이 게시물은 게시중단 되어\n댓글 열람 및 작성이 불가합니다.");return}if(!naverCommentController.isVisible(o,b)){if(m){nclk_v2(m.element,"res.replyopen","","")}var f={blogNo:blogNo,ticketNo:o,targetNo:b,commentNoPosition:c,aFormation:["list","page","write"],isPostComment:true,nPageSize:50,sPageType:"default",sLikeItId:blogId+"_"+b,bIsAutoFocus:h};naverCommentController.open(f);this._selectCommentButton(b);d.hide()}else{if(m){nclk_v2(m.element,"res.replyclose","","")}naverCommentController.close(o,b);this._releaseAllButton(b)}break;case this.RELAY:this.relayControl(m,n,b);break;case this.SYMPATHY:if(e==2||e==6){alert("이 게시물은 게시중단 되어\n공감하기 및 열람이 불가합니다.");return}if(!k||this.arrChkopen[n]!=a){if(m){nclk_v2(m.element,"res.symopen","","")}d.show();var g=document.body.className;l.src="/SympathyHistoryList.naver?blogId="+blogId+"&logNo="+b+"&layoutWidthClassName="+g;this._selectSympathyButton(b);naverCommentController.close(o,b)}else{if(m){nclk_v2(m.element,"res.symclose","","")}this._releaseAllButton(b);d.hide(l)}break}this.arrChkopen[n]=a;isOpenCmt=naverCommentController.isVisible(o,b);k=d.visible()},_selectCommentButton:function(a){var b=$("Comi"+a);var c=b?$Element(b).parent(function(d){return d.hasClass("area_comment")},1)[0]:null;this._releaseSympathyButton(a);this.selectButton(b);this.selectButton(c)},_selectSympathyButton:function(a){var c=$("area_sympathy"+a);var d=$$.getSingle(".btn_sympathy",c);var b=$("Sympathy"+a);this._releaseCommentButton(a);this.selectButton(c);this.selectButton(d);this.selectButton(b)},_releaseSympathyButton:function(b){var a=$("Sympathy"+b);var c=$("area_sympathy"+b);var d=$$.getSingle(".btn_sympathy",c);this.releaseButton(a);this.releaseButton(c);this.releaseButton(d)},_releaseCommentButton:function(a){var b=$("Comi"+a);var c=b?$Element(b).parent(function(d){return d.hasClass("area_comment")},1)[0]:null;this.releaseButton(b);this.releaseButton(c)},_releaseAllButton:function(b){var c=$("Comi"+b);var d=c?$Element(c).parent(function(g){return g.hasClass("area_comment")},1)[0]:null;var a=$("Sympathy"+b);var e=$("area_sympathy"+b);var f=$$.getSingle(".btn_sympathy",e);this.releaseButton(c);this.releaseButton(d);this.releaseButton(a);this.releaseButton(e);this.releaseButton(f)},setCommentCount:function(b,c){var a=$Element($("Comi"+c));if(!a){return}if(b==0){a.html("댓글 쓰기")}else{a.html("댓글 "+b+"개")}a=null},setRelayCount:function(b,c){var a=$Element($("Rew"+c));if(!a){return}if(b==0){a.html("엮인글 쓰기")}else{a.html("엮인글 "+b+"개")}a=null},setSympathyCount:function(b,c){var a=$Element($("Sympathy"+c));if(!a){return}if(b==0){if(blogOwner){a.html("공감")}else{a.hide()}}else{a.html("공감 "+b)}elBtn=null},selectButton:function(b){var a=$Element($(b));if(!a){return}a.removeClass("pcol2");a.addClass("pcol3")},releaseButton:function(b){var a=$Element($(b));if(!a){return}a.removeClass("pcol3");a.addClass("pcol2")},event_sublayer:function(h){var k=h[0];var j=h[1];var b=h[2];var d=h[3];var l=b.toLowerCase()=="b"?"205":"204";var g=$("EventComi"+k);var c=$Element(g);var e=$("EventCom"+k);var a=$Element(e);if(!naverCommentController.isVisible(l,j)){var f={blogNo:blogNo,ticketNo:l,targetNo:j,commentNoPosition:"",aFormation:["list","page","write"],isPostComment:false,nPageSize:50,sPageType:"default",sLikeItId:""};naverCommentController.open(f);c.toggleClass("icon_navigation_b","icon_navigation_a");a.toggleClass("pcol2","pcol3")}else{naverCommentController.close(l,j);c.toggleClass("icon_navigation_b","icon_navigation_a");a.toggleClass("pcol2","pcol3")}},stopqmsg:function(){$Element($("mrblogcontents")).hide();$Element($("mrblogdivisionline")).hide();var a=$("closeMrBlogForm");a.action="/MrBlogQuestionDismiss.naver?blogId="+blogId+"&flag=0";a.submit()},sympathy:function(a,b,c){loginObj.isLogin($Fn(function(){if(b==2||b==6){alert("이 게시물은 게시중단 되어\n공감하기 및 열람이 불가합니다.");return}var d="/PostSympathyAddAndCountAsync.naver";new $Ajax(d,{method:"post",onerror:function(){},onload:$Fn(function(e){try{var h=e.json()}catch(g){return false}if(h.resultCode==3){var f=blogURL+"/post/common/reloadOpenerParentAndClose.jsp";window.open(idURLSecret+"/nidlogin.login?mode=form&template=plogin&url="+f,"loginPopup","width=400,height=267");return}if(h.resultCode==5){alert(h.message);return}if(h.resultCode!=1){alert(h.message)}if(h.count>0&&h.resultCode!=2){this.setSympathy(h.logNo,h.count)}},this).bind()}).request({blogId:blogId,logNo:a})},this).bind(),loginObj.popUpLogin)},setSympathy:function(b,d){var a=$("Sympathy"+b);var f=$Element(a);f.show();f.html("공감 "+d);var c=$("sympathyFrm"+b);if(c){try{c.contentWindow.location.reload()}catch(e){}}if(!$Element(c).visible()){f.fireEvent("click")}},realModifyPost:function(e,a,d,h,c,b){var g="/"+blogId;var f="";if(gIsRabbitWriterOn==="false"&&c==3){if(blogOwner){f=gSE3Url+"editor?docId="+a}else{f=gSE3Url+"editor?docId="+a+"&targetUserId="+gBlogId+"&targetBBS="+b}}else{f=g+"?Redirect=Update&cpage="+d+"&sourceCode="+e+"&logNo="+a}if(isRequestFromIPad||$Agent().navigator().mobile||$Agent().navigator().msafari||c==3){window.top.location.href=f}else{window.top.location.href=f}},modifyPost:function(b,c,a){loginObj.isLogin($Fn(function(){if(readOnlyStatus){alert(readOnlyLinkErrorMsg);return}var d="/ScrapBlackListCheck.naver";new $Ajax(d,{method:"POST",onerror:function(){},onload:$Fn(function(g){var f=g.json();var e=nickName?nickName+"("+blogId+")":blogId;if(f.isVisitorBlackListed){alert(e+" 님은 글쓰기 제한 기능을 사용하고 있습니다.")}else{this._modifyPost(b,c,a)}},this).bind()}).request({blogId:blogId,blogNo:blogNo,blogNickName:nickName,sourceBlogNo:blogNo,sourceBlogId:blogId,sourceBlogNickName:nickName})},this).bind(),loginObj.openLayeredLogin)},_isNotPPCMac:function(){var a=navigator.userAgent;return(a||"").indexOf("PPC Mac OS X")<0},_findCountByLogNo:function(a){for(var b=1;b<aPostBaseInfo.length;b++){if(aPostBaseInfo[b].split("|")[0]==a){return b}}},_modifyPost:function(c,j,g){if(j==null){j=this.modifyNo}if(j>100){j=this._findCountByLogNo(j)}var k=aPostBaseInfo[j].split("|");var a=k[0];var d=k[1];var e=aPostSendInfo[j];var f=k[2];var h=k[3];var b=k[4];var l=k[5];var n=k[7];var m=k[8];if(d!=0&&($Agent().navigator().version=="5.5"&&$Agent().navigator().ie)){alert("IE 5.5에서는 템플릿쓰기를 수정 할 수 없습니다. IE 6.0 이상을 사용해 주세요.")}else{if(l==4){alert("죄송합니다. 수정 권한이 없습니다.");return false}if(l==2||l==6){alert("이 게시물은 게시중단 되어\n수정하실 수 없습니다.");return false}if(penalty.isBlocked()){penalty.showMessage();return false}if(this._isNotPPCMac()&&$Agent().navigator().mobile||$Agent().navigator().msafari){if(!isOverIOS5_0Version&&!isOverAndroidJellybeanVersion){if(!confirm("이 글을 TEXT모드에서 수정하시겠습니까?\n\n에디터,html모드에서 작성하신 글을 TEXT모드에서 수정하실 경우, 작성된 글은 유지되나, 글꼴 등의 편집효과와 이미지 등의 첨부내용이 사라집니다.")){return false}}}if(e.length==0){this.realModifyPost(d,a,h,b,n,m)}else{if(g&&g=="realModify"){this.realModifyPost(d,a,h,b,n,m);return}if(this.makeLayerContent("modify",f)==true){this.upToLayer(c,$("sendPostLayer"))}else{this.realModifyPost(d,a,h,b,n,m)}this.modifyNo=j}}},realDeletePost:function(c,a,b){var d=document.deletePostFrm;if(!d){return}d.blogId.value=blogId;d.cpage.value=b;d.categoryNo.value=categoryNo;d.parentCategoryNo.value=parentCategoryNo;d.viewDate.value=viewDate;d.sourceCode.value=c;d.logNo.value=a;d.currentPage.value=b;d.action=(isMemolog?"/memo/MemologPostDelete.naver":"/PostDelete.naver");d.submit()},deletePost:function(c,d,a,b){if(readOnlyStatus){alert(readOnlyLinkErrorMsg);return}loginObj.isLogin($Fn(function(){this._deletePost(c,d,b,a)},this).bind(),loginObj.openLayeredLogin)},_deletePost:function(b,j,l,g){if(j==null){j=this.deleteNo}if(j>100){j=this._findCountByLogNo(j)}var k=aPostBaseInfo[j].split("|");var a=k[0];var c=k[1];var e=aPostSendInfo[j];var f=k[2];var h=k[3];if(e.length==0||this._isRecipe(f)){var d=l=="true"?"이 글은 공지로 등록되어 있어 삭제하실 경우\n공지도 함께 삭제됩니다. 삭제하시겠습니까?":"삭제된 글은 복구할 수 없습니다.\n삭제하시겠습니까?";if(confirm(d)){this.realDeletePost(c,a,h)}}else{if(g&&g=="realDelete"){this.realDeletePost(c,a,h);return}if(this.makeLayerContent("delete",f)=="empty"){this.realDeletePost(c,a,h)}else{this.upToLayer(b,$("sendPostLayer"));this.deleteNo=j}}},_isRecipe:function(a){aSendInfo=aPostSendInfo[a];for(i=0;i<aSendInfo.length;i++){if(aSendInfo[i].sourceTypeAsCode==35){return true}}return false},getRecipePostStatus:function(d,b){var a=false;for(var c=0;c<d.length;c++){if(d[c].logNo==b){if(d[c].sourceCode==35&&d[c].copyYn==true){a=true}}}return a},getSendInfoForDelete:function(h){var e=aPostSendInfo[h];var g=[];var a=null;var c=[];var b=[];for(var f=0;f<e.length;f++){var d=e[f];if(d.publishingTag!="R"){a=(d.targetUrl)?"<a href='"+d.targetUrl+"' target='_blank'>"+d.targetService+"</a>":d.targetService;if(d.sourceTypeGroupId==0){c.push(((c.join(""))?", ":"")+a)}else{if(d.sourceTypeGroupId==1){b.push(((b.join(""))?", ":"")+a)}}a=null}}if(c.length>0){g.push("<li>네이버 서비스<span>"+c.join("")+"</span></li>\n")}if(b.length>0){g.push("<li>외부 서비스<span>"+b.join("")+"</span></li>\n")}return g},makeLayerContent:function(a,d){var k,j,e,l,m,f,c,g,b,h;k=false;g=false;j=[];e=aPostSendInfo[d];l="";m=$("sendPostLayerBtn");b=$Element(m);c=e.length;for(f=0;f<c;f++){if(e[f].copyYn){if(a=="delete"){j.push('<p class="tc ln15"><strong>이 글을 삭제하시겠습니까?</strong><br>#{SERVICE_NAME}에서 등록한 글은 #{SERVICE_NAME}에서 삭제해주세요.<br><a href="#{TARGET_URL}" target="_blank" style="color:#4C8D32;">#{SERVICE_NAME}에서 등록한 글 보기</a></p>');m.href="#";b.addClass("_deletePostConfirm");b.addClass("_returnFalse")}else{if(a=="modify"){j.push('<p class="tc ln15"><strong>#{SERVICE_NAME}에서 등록한 글입니다.</strong><br>#{SERVICE_NAME}에서 수정하시겠습니까?</p>');m.href=e[f].targetUrl;b.removeClass("_deletePostConfirm");b.removeClass("_returnFalse")}}k=true}else{if(a=="delete"&&!g){g=true;j.push('<p class="ln15"><strong>이 글을 삭제하시겠습니까?</strong><br>작성하신 글은 아래의 서비스로 보내신 글입니다.<br>삭제시 보낸 곳에서도 자동 삭제됩니다.</p>');j.push('<div class="post_data"><h3>글 보내기 정보</h3><ul id="sendPost_deleteList"></ul></div>')}m.href="#";b.addClass("_deletePostConfirm");b.addClass("_returnFalse")}l=j.join("");l=l.replace(/#\{SERVICE_NAME\}/g,e[f].targetService);l=l.replace(/#\{TARGET_URL\}/g,e[f].targetUrl)}if(l!=""){$("layerContent").innerHTML=l;h=$Element($("sendPost_deleteList"));if(h){h.html(this.getSendInfoForDelete(d))}}else{k="empty"}j=e=l=m=f=c=g=b=h=null;return k},upToLayer:function(c,e){var f=$Element(c).offset();var g=$Element(c);var h=$Element(e);var j=140;var d=320;var b=f.top-g.height()-j;b=b<0?0:b;var a=f.left-g.width()-d;h.css({left:a+"px",top:b+"px",zIndex:1001});h.show();oCurtain.showCurtain(e,0)},showFileLayer:function(d,n,j,f){var l,g,m,b,u,r,c,h;l=$("fileLayer");g=$Element(l);m=aPostFiles[n];b=$$.getSingle("ul",l);u=[];agent=window.navigator.userAgent.toLowerCase();for(r=0,c=m.length;r<c;r++){u.push("<li>");u.push('<img width="11" height="10" alt="file" src="'+imageURL+'/imgs/ico_file.gif"/>');var p=m[r].encodedAttachFileName;if(!(m[r].licenseyn=="F"&&(j=="false"||j==null))){var a="";if(m[r].punishType!=0){a=" _showBlockAlertLayer _param("+m[r].encodedAttachFileName+"|"+m[r].encodedAttachFileUrl+"|"+n+"|"+m[r].punishType+") _returnFalse "}else{if(m[r].maliciousCodeYn=="true"){a=" _showMalwareAlertLayer _param("+m[r].encodedAttachFileName+"|"+m[r].encodedAttachFileUrl+"|"+n+") _returnFalse "}else{if(m[r].ahfLicenseYn=="true"){a=" _showAhfLicenseAlertLayer _param("+m[r].encodedAttachFileName+"|"+m[r].encodedAttachFileUrl+"|"+n+") _returnFalse "}}}var t=p;var s="";if(p.length>12){t=p.substr(0,12)+"..";s='title="'+p+'"'}var v=m[r].encodedAttachFileUrl;var e=m[r].encodedAttachFileNameByUTF8;var o=m[r].attachFileSize.split(",").join("");if(agent.indexOf("msie")>-1||agent.indexOf("trident")>-1){v=m[r].encodedAttachFileUrlByMS949}var k="";if(f==="true"){k="_scrapPost"}var q='<div class="addfile_opt"><a href="'+v+'?type=attachment" target="_blank" class="downFile '+a+" _checkAttachFileAlive _saveAttachFile "+k+'" '+s+' >내PC 저장</a><em>|</em><a href="#" class="_checkAttachFileAlive _toNDriveFromAttachFile _param('+v+"|"+e+"|"+o+"|"+f+') _returnFalse">네이버 MYBOX 저장</a></div>';p=t+q}if(m[r].maliciousCodeYn=="true"){p=p+'<em class="bar">|</em><img src="'+imageURL+'/imgs/txt_infected.gif" width="48" height="10" alt="악성코드감염" />'}u.push(p);u.push("</li>")}b.innerHTML=u.join("");if(g.visible()&&typeof this._sPrevFileLayer!=="undefined"&&this._sPrevFileLayer===n){this.closeFileLayer()}else{g.css("zIndex",9999);g.show();utility.positionLayer(d,l,{sTargetPos:"br",sLayerPos:"tr"});this._sPrevFileLayer=n;h=g.height()+g.offset().top}m=r=c=u=b=l=g=h=null},showMalwareAlertLayer:function(b,f,d,e){var a,j,h,g,c;a=$("malwareAlertLayer");c=$Element(a);j=$$.getSingle("p",a);j.innerHTML=j.innerHTML.replace(/{FILENAME}/g,f);g=$$.getSingle("div.btns",a);g.innerHTML=g.innerHTML.replace(/FILEPATH/g,d+"?type=attachment");c.show();utility.ellipsisPage(a);if(e<0){this._showAlertLayerOnCenterOfWindow(a)}else{this._showAlertLayerUnderTitle(e,a)}c=a=j=null},showAhfLicenseAlertLayer:function(d,e,a,b){var c="이 파일은 <span>저작권 침해의 우려가 있는 내용이 포함</span>되어 있어<br>고객님외의 다른 방문자가 다운로드 할 수 없도록<br>이용이 제한되었습니다.";this.showPunishAlertLayer(d,e,a,b,c)},closeMalwareAlertLayer:function(a){$Element($("malwareAlertLayer")).hide()},showBlockAlertLayer:function(d,f,a,b,e){var c;if(e=="1"){c="이 파일은 <span>저작권법 제103조(복제&middot;전송의 중단)</span>에 따라<br>저작권자의 요청에 의해 고객님외의 다른 방문자가<br>다운로드 할 수 없도록 이용이 제한되었습니다."}else{if(e=="2"){c="이 파일은 <span>서비스 운영원칙에서 제한하는 내용이 포함</span>되어 있어<br>고객님외의 다른 방문자가 다운로드 할 수 없도록<br>이용이 제한되었습니다."}else{if(e=="3"){c="이 파일은 정보통신망이용촉진및정보보호등에 관한<br>법률 제44조의2에 따라 관련 당사자의 요청에 의해<br><span>사생활침해/명예훼손의 사유</span>로 고객님외의 다른 방문자가<br>다운로드 할 수 없도록 이용이 제한되었습니다."}else{if(e=="4"){c="이 파일은 <span>저작권 침해의 우려가 있는 내용이 포함</span>되어 있어<br>고객님외의 다른 방문자가 다운로드 할 수 없도록<br>이용이 제한되었습니다."}}}}this.showPunishAlertLayer(d,f,a,b,c)},showPunishAlertLayer:function(b,f,c,e,a){var h,j,g,d,k;h=$("blockAlertLayer");k=$Element(h);j=$$("p",h);j[0].innerHTML=a;j[1].innerHTML="이용제한 파일 : "+f;d=$Element("blockAlertDownloadBtn");d.attr("href",c+"?type=attachment");k.show();utility.ellipsisPage(h);if(e<0){this._showAlertLayerOnCenterOfWindow(h)}else{this._showAlertLayerUnderTitle(e,h)}k=h=oUl=null},closeBlockAlertLayer:function(a){$Element($("blockAlertLayer")).hide()},_showAlertLayerOnCenterOfWindow:function(c){var b=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;var d=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;var a=$Element(c);var f=(b-a.width())/2;var e=$Document().scrollPosition().top+(d-a.height())/2;a.offset(e,f)},_showAlertLayerUnderTitle:function(b,a){utility.positionLayer($("title_"+b),a,{sTargetPos:"br",sLayerPos:"tr",nDiffTop:0,nDiffLeft:16})},closeFileLayer:function(){utility.closeLayer("fileLayer")},checkSendInfoUrl:function(b,a){switch(a.toLowerCase()){case"travel":utility.showLayer(b.element,$("travel_closing_popup"));b.stop();break}},showSendInfoLayer:function(c,e,a){var f=aPostSendInfo[e];var j=$("sendInfoLayer");var b=$Element(j);var g=[];var d=$Element($("sendInfoLayerDiv"));d.html("");for(i=0;i<f.length;i++){var h=f[i];g.push("<p><em>"+h.targetService+"</em> : ");g.push((h.targetUrl)?'<a href="'+h.targetUrl+'" target="_blank" class="_sendInfoUrl _param('+h.sourceType+')">'+h.targetCategoryDisplay+"</a>":h.targetCategoryDisplay);if(parseInt(h.reputationCnt)>0){g.push(' <span class="bar">|</span> <span class="yes">'+h.reputationName);g.push("<em>"+h.reputationCnt+"</em></span>")}g.push("</p>")}d.html(g.join(""));if(b.visible()&&typeof this._sPrevSendInfoLayer!=="undefined"&&this._sPrevSendInfoLayer===e){utility.closeLayer(j)}else{welLayer=$Element(j);welTarget=$Element(c);welLayer.show();welLayer.css({top:welTarget.offset().top+welTarget.height()+"px",left:welTarget.offset().left-(welLayer.width()/2)+"px",zIndex:500});this._sPrevSendInfoLayer=e;setTimeout(function(){b.css({zoom:1})},0)}},setSendPost:function(){for(var e=1,d=aPostSendInfo.length;e<d;e++){if(!aPostSendInfo[e]){continue}var b=aPostSendInfo[e];for(var c=0,f=b.length;c<f;c++){if(b[c].copyYn){var a=b[c].logNo;$Element($("sendPost_"+a)).hide();$Element($("sendPost_from_service_"+a)).show();$Element($("sendPost_from_service_H_"+a)).html('<a href="'+b[c].targetUrl+'" target="_blank">'+b[c].targetService+" &gt; "+b[c].targetCategoryDisplay+"</a>")}}}},reloadByUser:function(){location.href="/PostView.naver?blogId="+blogId+"&logNo="+paramLogNo},closeRosMsg:function(){$Element($("readonlynotice")).hide();document.cookie="ros|"+blogId+"=1; path=/"},isDeadAttachFile:function(c,d){if(d!="true"){return false}var a="1";var b=true;new $Ajax("/CheckAttachFileAlive.naver",{type:"xhr",method:"get",cookie:document.cookie,onload:function(e){if(e.status()==200&&e.text()==a){b=false}},async:false}).request({targetUrl:c});return b},openMagazineViewer:function(d,c,a,f,g,e){var b=window.open("/OpenMagazineViewer.naver?blogId="+blogId+"&logNo="+c+"&categoryNo="+a+"&parentCategoryNo="+f+"&viewDate="+g,"postviewer","width="+screen.availWidth+",height="+screen.availHeight+",left=0,top=0,resizable=yes,scrollbars=yes",true);if(b){b.focus()}if(nclk_v2){nclk_v2(d,"pst.viewer","","")}},openOverflowMenu:function(a,b){if(this.welLastOverflowLayer!=null&&this.welLastOverflowLayer.attr("area-hidden")=="false"){this.welLastOverflowLayer.attr("area-hidden",true);this.welLastOverflowLayer.removeClass("on");a.attr("area-expanded",false);if(typeof foreignPostMapViewController!="undefined"){foreignPostMapViewController.hideMap()}if(typeof postMapViewController!="undefined"){postMapViewController.hideMap()}if(this.welLastOverflowLayer.$value().id=="overflowmenu-"+b){return}}this.welLastOverflowLayer=$Element("overflowmenu-"+b);this.welLastOverflowLayer.attr("area-hidden",false);this.welLastOverflowLayer.addClass("on");a.attr("area-expanded",true)},closeOverflowMenu:function(a){if(this.welLastOverflowLayer!=null&&this.welLastOverflowLayer.attr("area-hidden")=="false"){this.welLastOverflowLayer.attr("area-hidden",true);this.welLastOverflowLayer.removeClass("on");a.attr("area-expanded",false)}},modifyPostAdvertise:function(c,b,a,d){new $Ajax("/PostAdvertiseUpdateAsync.naver",{method:"post",onerror:function(){alert("설정 중 문제가 발생 했습니다.")},onload:$Fn(function(e){var f=e.json();if(!f){alert("설정 중 문제가 발생 했습니다.");return}if(d){alert("이 글에 광고를 노출합니다.")}else{alert("이 글에만 광고를 노출하지 않습니다.")}location.reload()},this).bind()}).request({blogId:b,logNo:a,postAdvertiseYN:d})},report:function(b,a){loginObj.isLogin($Fn(function(){window.open(a,"SRP","height=800,width=580,scrollbars=yes,menubar=no,toolbar=no,location=no")},this).bind(),loginObj.openLayeredLogin)}});var MalWareManage={hideExternalLayerAll:function(){var a=$Element($("blockScrapLayerIdByMalware"));if(a){a.hide()}}};var MusicManage={showSendPostBlockLayer:function(b){this.hideExternalLayerAll();if(!isParentExist()){return false}var a=$Element(parent.$("sendPostBlockLayerById"));if(!a){return false}var c=$Element(b).offset();a.css({top:$Element(self.frameElement).offset().top+c.top+"px",left:c.left+"px"});a.show();a=null;return false},showSendPostBlockModifyLayer:function(b){this.hideExternalLayerAll();if(!isParentExist()){return false}var a=$Element(parent.$("sendPostBlockModifyLayerById"));if(!a){return false}var c=$Element(b).offset();a.css({top:$Element(self.frameElement).offset().top+c.top+"px",left:c.left+"px"});a.show();return false},hideExternalLayerAll:function(){var b=$Element($("blockScrapLayerId"));if(isParentExist()&&parent.$&&b){b.hide();var a=$A([$Element(parent.$("temporaryBlockScrapLayerId")),$Element(parent.$("sendPostBlockModifyLayerById")),$Element(parent.$("sendPostBlockLayerById"))]);a.forEach(function(c,d,e){if(c){c.hide()}})}},changeSendPostArea:function(a){var b=$Element($("send_post"));if(b.visible()){b.hide();$Element($("chageSendPostById")).show()}else{this.showSendPostBlockModifyLayer(a)}b=null}};function isParentExist(){try{if(!parent||!parent.document||typeof parent=="undefined"){return false}}catch(a){return false}return true}nhn.husky.SE2View_Footnote=$Class({name:"SE2View_Footnote",$init:function(){this.sFootnoteTxtClassName="husky_se2_footnote_txt";this.sFootnoteAreaClassName="husky_se2_footnote_area";this.sFootnoteAttr="_se2_footnote";this.rxFrontTagRemover=/<(script|marquee)[^>]*\/?>/i;this.rxBackTagRemover=/<\/(?:\1)>/i;this.sFootnoteHoverLayerTemplate='<div style="z-index:99999;position:absolute;top:0;left:0;width:251px;padding:10px 6px 9px 11px;border:1px solid #777777;background:#ffffff;line-height:17px;color:#666666;word-break:break-all;word-wrap:break-word;"><strong style="display:block;margin-bottom:4px;color:#333333;font-size:12px;">각주<span class="husky_se2_footnote_idx" style="display:inline-block;margin:-3px 0 3px;font-family:tahoma;font-size:11px;vertical-align:middle">1</span></strong><span class="husky_se2_footnote_arrow" style="position:absolute;top:-6px;left:0px;width:9px;height:6px;background:url('+imageURL+'/imgs/icon_set.gif) 0 -411px no-repeat;"></span><span class="husky_se2_footnote_contents" style="font-size:12px;"></span></div>'},$ON_MSG_PAGE_LOADED:function(f){var g=document.createElement("DIV");g.innerHTML=this.sFootnoteHoverLayerTemplate;this.elHoverLayer=g.firstChild;this.welHoverLayer=$Element(this.elHoverLayer);this.elIdxArea=cssquery.getSingle("SPAN.husky_se2_footnote_idx",this.elHoverLayer);this.elArrowArea=cssquery.getSingle("SPAN.husky_se2_footnote_arrow",this.elHoverLayer);this.elContentsArea=cssquery.getSingle("SPAN.husky_se2_footnote_contents",this.elHoverLayer);f.insertBefore(this.elHoverLayer,f.firstChild);this.nHoverLeftMax=f.offsetWidth-this.elHoverLayer.offsetWidth-5;this.elHoverLayer.style.display="none";var e=cssquery("SPAN."+this.sFootnoteTxtClassName,f);var b=$Fn(this._onMouseOverFootnote,this);var d=$Fn(this._onMouseOutFootnote,this);for(var a=0,c=e.length;a<c;a++){b.detach(e[a],"mouseover");d.detach(e[a],"mouseout");b.attach(e[a],"mouseover");d.attach(e[a],"mouseout")}},_onMouseOverFootnote:function(e){var c=e.element;var d=$Element(e.element);var a=JSON.parse(decodeURIComponent(c.getAttribute("jsonvalue"))).desc;a=a.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n/g,"<br>");this.elContentsArea.innerHTML=a;this.elIdxArea.innerHTML=c.innerHTML;var b=d.offset();if(b.left>this.nHoverLeftMax){this.elArrowArea.style.left=(b.left-this.nHoverLeftMax)+"px";b.left=this.nHoverLeftMax}else{if(b.left<5){this.elArrowArea.style.left=b.left+"px";b.left=0}else{this.elArrowArea.style.left="5px";b.left-=5}}this.elHoverLayer.style.display="block";this.welHoverLayer.offset(b.top+20,b.left)},_onMouseOutFootnote:function(a){this.welHoverLayer.offset(0,0);this.elHoverLayer.style.display="none"}});var SummaryContent=$Class({$init:function(){this.sBtnHead="btnhead";this.sBtnTail="btntail";this.sMoreTail="moretail";this.htCacheContents={};this.summaryLoadLock={}},_isSummaryLoadLock:function(b){var c=this;var a=c.summaryLoadLock[b];if(typeof a!=="undefined"&&c.summaryLoadLock[b]){return true}return false},_enableSummaryLoadLock:function(a){var b=this;if(typeof a!=="undefined"&&a){b.summaryLoadLock[a]=true}},_disableSummaryLoadLock:function(a){var b=this;if(typeof a!=="undefined"&&a){b.summaryLoadLock[a]=false}},getSummaryContent:function(e,g,d){var b=this;var c=d?e+"_"+d:e;if(this._isSummaryLoadLock(this.sMoreTail+c)){return}this._enableSummaryLoadLock(this.sMoreTail+c);var f=this.htCacheContents[c];var a=new nhn.husky.SE2View_Footnote();if(typeof f!="undefined"){this.showMoreArea(c);a.$ON_MSG_PAGE_LOADED(document.body);b._disableSummaryLoadLock(b.sMoreTail+c)}else{g=g||blogId;new $Ajax("/SummaryContentFetch.naver",{method:"post",onload:$Fn(function(j){var h,o,l,n,m,k;if(window.ActiveXObject){l=j.text();n=new ActiveXObject("Microsoft.XMLDOM");n.loadXML(l);m=n.documentElement;h=m.childNodes[0].text;o=m.childNodes[1].text}else{k=j.xml();h=k.childNodes[0].childNodes[1].textContent;o=k.childNodes[0].childNodes[3].textContent}this.showMoreArea(c);this.setMoreTail(c,o);a.$ON_MSG_PAGE_LOADED(document.body);h=o=l=n=m=k=null;setTimeout($Fn(function(){var p=$(b.sMoreTail+c);new ImageLazyLoader(p).loadImages();b.htCacheContents[c]=p.innerHTML;videoPlayerController.load(b.sMoreTail+c);b._disableSummaryLoadLock(b.sMoreTail+c)},this).bind());PhotoViewerNew.reload()},this).bind()}).request({logNo:e,blogId:g,key:d,imageWidth:imageWidth})}},setMoreTail:function(a,b){$Element($(this.sMoreTail+a)).html(b)},getMoreTail:function(a){return $Element($(this.sMoreTail+a)).html()},moreOpen:function(a,b){a=typeof b!="undefined"?a+"_"+b:a;this.showMoreArea(a);this.loadSummaryContents(a)},showMoreArea:function(a){$Element($(this.sBtnHead+a)).hide();$Element($(this.sBtnTail+a)).show();$Element($(this.sMoreTail+a)).css({position:"",left:"",top:"",display:""})},moreClose:function(f,e){var c=this;var d=e?f+"_"+e:f;if(c._isSummaryLoadLock(c.sMoreTail+d)){return}videoPlayerController.resetPlayer(c.sMoreTail+d);var b=document.getElementById(c.sMoreTail+d);if(b){var a=b.getElementsByTagName("iframe");for(var g=0;g<a.length;g++){var h=a[g];h.src=h.src}}$Element($(this.sBtnHead+d)).show();$Element($(this.sBtnTail+d)).hide();$Element($(this.sMoreTail+d)).hide()},loadSummaryContents:function(a){$(this.sMoreTail+a).innerHTML=$(this.sMoreTail+a+"_contentsHidden").value}});var postListTable=new postCommon.ListTable();var postView=new postCommon.View();var resizePollIframe=function(){};var oSummaryContent=new SummaryContent();var tagNameValidator={restrictedTagChars:/[\x25\x26\x2b\x3c\x3e\x3f\x2f\x5c\x27\x22\x3d\n]|(\x5c\x6e)/g,maxTagLength:100,isTagname:function(a){if(!a){return false}return a.match(this.restrictedTagChars)==null},isOverMaxLength:function(a){return a.length>this.maxTagLength}};var contentsTagLinker=(function(){var a=function(c){if(!document.querySelectorAll){return}var d=function(){var f=this;var g=f.innerText;var e=g.replace(/#/g,"");if(!tagNameValidator.isTagname(e)){return}if(tagNameValidator.isOverMaxLength(e)){e=e.substr(0,tagNameValidator.maxTagLength)}var h=e.match(/[\s]/);if(h!=null){e=e.substr(0,h.index)}var j=c(e,this.innerHTML);j.click()};var b=document.querySelectorAll("span.__se-hash-tag");[].forEach.call(b,function(e){e.addEventListener("click",d)})};return{bindTagLinkOnContents:a}})();var AutoSourcing={elDiv:null,id:"",timer:null,regex:null,strings:[],skip:false,init:function(c,a){var d=$Agent().navigator();this.elDiv=$("<div>");var b=$Element(this.elDiv);b.css("opacity",1);b.className("autosourcing-stub-extra");this.id="autosourcing_tmp_"+Math.floor((Math.random()*100000));this.regex=new RegExp(c.replace("%id%","(\\d+)"));if(typeof a=="undefined"){a=true}this.setEnable(a)},setEnable:function(a){try{if(a){if(typeof document.body.oncopy!="undefined"){$Fn(this.copy,this).attach(document.body,"copy")}else{$Fn(this.keydown,this).attach(document,"keydown");$Fn(this.keypress,this).attach(document,"keypress");$Fn(this.copy,this).attach(document,"contextmenu")}}}catch(b){}finally{}},getId:function(a){var c,d,b,e;c=this.cloneRange(a);c.collapse(true);b=this.getParentElement(c);while(b&&b.parentNode){if(b.nodeType==1&&this.regex.test(b.id)){e=parseInt(RegExp.$1);return isNaN(e)?0:e}b=b.parentNode}d=this.cloneRange(a);d.collapse(false);b=this.getParentElement(d);while(b&&b.parentNode){if(b.nodeType==1&&this.regex.test(b.id)){e=parseInt(RegExp.$1);return isNaN(e)?0:e}b=b.parentNode}return -1},getSelection:function(){if(window.getSelection){return window.getSelection()}else{return document.selection}},getRange:function(b){b=b||this.getSelection();if(b.getRangeAt){try{return b.getRangeAt(0)}catch(a){return this.createRange(b)}}else{return b.createRange()}},createRange:function(a){if(a.createRange){return a.createRange()}else{return document.selection.createRange()}},cloneRange:function(a){a=a||this.getRange();if(a.duplicate){return a.duplicate()}else{return a.cloneRange()}},getParentElement:function(a){var b=a.parentElement?a.parentElement():a.commonAncestorContainer;if(!b){return null}while(b.nodeType!=1){b=b.parentNode}return b},setString:function(b,a){this.strings[b]=a},getInnerHtml:function(b){if(!b){return""}var a=document.createElement("div");a.appendChild(b);return a.innerHTML},copy:function(g){try{var f=this.getSelection();var a=this.getRange(f);var s=this.cloneRange(a);var r=/<(?:p|div)[^<>]+class\s*=\s*"?autosourcing\-stub(?:\-extra)?\-saved(?:\b|")/i;var h=/textarea|input/i;var q=/<div[^<>]+contenteditable\s*=\s*"?true"?/i;var b=this.getId(a);var n=null;var m;this.skip=false;clearTimeout(this.timer);if(b==-1){try{this.elDiv.parentNode.removeChild(this.elDiv)}catch(l){}return}if(g&&g.element&&g.element.tagName&&g.element.tagName.toUpperCase()=="A"){return}try{this.elDiv.innerHTML=this.strings[this.getId(a)]}catch(l){}if(window.getSelection&&a.cloneContents){var j=(window.XMLSerializer)?new XMLSerializer().serializeToString(a.cloneContents()):a.cloneContents().textContent;if(j==""){j=a.cloneContents().textContent}var o="";if(window.getSelection&&window.getSelection().anchorNode&&window.getSelection().anchorNode.parentNode&&window.getSelection().anchorNode.parentNode.cloneNode){o=this.getInnerHtml(window.getSelection().anchorNode.parentNode.cloneNode(true))}if(this.getBytes(j)>20){if(r.test(j)||h.test(a.commonAncestorContainer.tagName)||q.test(o)){if(this.elDiv&&this.elDiv.parentNode){this.elDiv.parentNode.removeChild(this.elDiv)}this.skip=true;return}s.collapse(false);s.insertNode(this.elDiv);if(this.elDiv.nextSibling&&this.elDiv.nextSibling.data!=""){a.setEndBefore(this.elDiv.nextSibling)}else{a.setEndAfter(this.elDiv)}f.removeAllRanges();f.addRange(a)}}else{if(document.selection){var k=document.body||document.getElementsByTagName("body")[0];var d=("<div>");var p=$("<span>");p.id=this.id;if(r.test(a.htmlText)||h.test(a.parentElement().tagName)){this.skip=true;return}if(this.getBytes(a.htmlText)>20){s.collapse(false);s.pasteHTML(p.outerHTML+"&nbsp;<span></span>");p=$(this.id);(p||s.parentElement()).insertAdjacentElement("afterEnd",this.elDiv);var c=this.elDiv.innerText?this.elDiv.innerText.length:1;a.moveEnd("character",c);try{a.select()}catch(l){}if(p&&p.parentNode){if(p.nextSibling&&p.nextSibling.nextSibling){p.parentNode.removeChild(p.nextSibling.nextSibling)}if(p.nextSibling&&p.nextSibling.nextSibling){p.parentNode.removeChild(p.nextSibling.nextSibling)}if(p){p.parentNode.removeChild(p)}}if(d&&d.parentNode){d.parentNode.removeChild(d)}}}}if(typeof document.body.oncopy!="undefined"){this.timer=setTimeout($Fn(function(){this.aftercopy(a)},this).bind(),10)}}catch(l){}finally{}},getBytes:function(a){a=$S(a).stripTags().toString();a=a.replace(/\s/g,"");a=a.replace(/&nbsp;/g,"");bytes=$S(a).bytes({charset:"euc-kr"});return bytes},aftercopy:function(a){if(this.skip){return}try{this.elDiv.parentNode.removeChild(this.elDiv);if(/WebKit/.test(navigator.userAgent)){var b=this.getSelection();b.removeAllRanges();b.addRange(a)}}catch(c){}},keydown:function(b){var a=b.key();if((a.ctrl||a.meta)&&a.keyCode==67){this.copy(b)}},keypress:function(b){var a=b.key();if((a.ctrl||a.meta)&&a.keyCode==67){this.timer=setTimeout($Fn(function(){this.aftercopy()},this).bind(),10)}},mousedown:function(a){}};var PostBottomOptionalAreaView=$Class({$init:function(){this.sPostBottomOptionalAreaType=null;this.sPostSeq="1";this.sLogNo=null},processPostBottomOptionalAreaShowOrNot:function(){if(!this._isNeedToOpenOptionalArea()){return}this._prepareForOptionalArea();this._postBottomOptionalAreaShow()},_prepareForOptionalArea:function(){this.sPostBottomOptionalAreaType=postBottomOptionalAreaType;this.sLogNo=firstPostLogNo},_postBottomOptionalAreaShow:function(){if(this.sPostBottomOptionalAreaType==commentAreaOpenType&&sCommentNoPosition!=""){postView.cmtControl(this.sPostBottomOptionalAreaType,this.sPostSeq,this.sLogNo,null,firstPostIsAllOpenPost,sCommentNoPosition)}else{postView.cmtControl(this.sPostBottomOptionalAreaType,this.sPostSeq,this.sLogNo,null,firstPostIsAllOpenPost,null,true)}},_isNeedToOpenOptionalArea:function(){if(typeof isCommentAreaOpen=="undefined"||typeof isRelayAreaOpen=="undefined"){return false}if(isCommentAreaOpen!=true&&isRelayAreaOpen!=true&&isSympathyAreaOpen!=true){return false}return true}});var postBottomOptionalAreaView=new PostBottomOptionalAreaView();var FlashUtil=$Class({$init:function(){},getFlashVersion:function(){try{try{var a=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");try{a.AllowScriptAccess="always"}catch(b){return"6"}}catch(b){}return new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version").replace(/\D+/g,",").match(/^,?(\d+),.+$/)[1]}catch(b){try{if(navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin){return(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]).description.replace(/\D+/g,",").match(/^,?(\d+),.+$/)[1]}}catch(b){}}return"0"}});var flashUtil=new FlashUtil();var PostExecutor=$Class({$init:function(){this._setEvent()},_setEvent:function(){$Fn(this._onLoad,this).attach(window,"load")},_onLoad:function(){this.loadTopList();this.excuteForMemolog();this.loadTag();this.syncMenu();MusicManage.hideExternalLayerAll();MalWareManage.hideExternalLayerAll();this.checkClickPrevent();utility.checkRClickYN(rightClickOpenYn,blogOwner);this.setAutoSourcingHtmlView();this.bindFootnote();this.ellipsisForPost();if(postView){postView.resizeAllPosts()}this.patchIE6FramesetScroll();if(postListTag){setTimeout(function(){postBottomOptionalAreaView.processPostBottomOptionalAreaShowOrNot()},1000)}else{postBottomOptionalAreaView.processPostBottomOptionalAreaShowOrNot()}this.initializeSocialPlugin();this.bindTagLinkOnContents()},bindTagLinkOnContents:function(){var a=(function(b){return function(d){var c=document.createElement("a");c.className="tag";c.href="/PostListByTagName.naver?blogId="+b+"&encodedTagName="+encodeURIComponent(d);c.innerHTML="#"+d;$Fn(function(e){nclk_v2(e.element,"pst.posttag","","")}).attach(c,"click");return c}})(blogId);contentsTagLinker.bindTagLinkOnContents(a,"pst.posttag")},_onError:function(a){utility.nvl_error(a)},excuteForMemolog:function(){if(!isMemolog){return}var a=$("listTopForm");if(a){a.reset()}if(userTopListManageOpen){postListTable.openListTopManagerForMemo()}},initializeSocialPlugin:function(){if(isThumbnailList||isMemologList){return}if(this._isSocialPluginLoaded()){return}var f=document.head?document.head:document.getElementsByTagName("head")[0];var c=document.createElement("script");var b=new Date();var a=b.getDate();var e=b.getMonth()+1;var g=b.getFullYear();if(a<10){a="0"+a}if(e<10){e="0"+e}c.src=(spiURL+"/js/release/socialplugin_euckr_v1.js?"+g+e+a);c.charset="euc-kr";f.appendChild(c)},_isSocialPluginLoaded:function(){return document.getElementById("socialPluginCustomTag")?true:false},checkClickPrevent:function(){utility.clickPrevent()},syncMenu:function(){if(typeof menu!="undefined"&&!userSelectMenu){menu.syncMenu(currentCategoryNo,categoryParentCategoryNo)}else{userSelectMenu=false}},loadTag:function(){if(postListTag){postListTag.loadTagInfo()}if(this.isParentExist()&&(parent.location.href.indexOf("PostPreview.nhn")>-1||parent.location.href.indexOf("MemologMemoPreview.nhn")>-1||parent.location.href.indexOf("PostPreview.naver")>-1||parent.location.href.indexOf("MemologMemoPreview.naver")>-1)){for(var b=0,a=aQueuePost.length;b<a;b++){var c=aQueuePost[b];postListTag.setTagList(c.logNo,c.tagNames,"resize",$("tagList_"+c.logNo))}}},isParentExist:function(){try{if(!parent||!parent.document||typeof parent=="undefined"){return false}}catch(a){return false}return true},loadTopList:function(){if(!isMemolog&&postListTable&&(userTopListOpen||(!(isThumbnailList||isThumbnailView)&&isTopListOpen))){postListTable._bPageFirstLoad=true;postListTable.toggleTopList()}},patchIE6FramesetScroll:function(){if($Agent().IE6&&typeof self.parent!=="undefined"){self.$$.getSingle("html").style.zoom=1;setTimeout(function(){self.$$.getSingle("html").style.zoom=""},100)}},ellipsisForPost:function(){var a=$("PostThumbnailAlbumViewArea");if(a){utility.ellipsisPage(a)}a=null},setAutoSourcingHtmlView:function(){var a,b;AutoSourcing.init("post_%id%",autoSourcingYn);b=aPostAutoSourcingHtmlView.length;for(a=1;a<b;a++){AutoSourcing.setString(a,aPostAutoSourcingHtmlView[a])}},bindFootnote:function(){var a=new nhn.husky.SE2View_Footnote();a.$ON_MSG_PAGE_LOADED(document.body)}});new PostExecutor();var WriteNewLcs=$Class({$init:function(){this._setEvent()},_setEvent:function(){$Fn(this._onLoad,this).attach(window,"load")},_onLoad:function(){var b="";if($("gdid")!=null){b=$("gdid").value}if(typeof gdidTag!="undefined"){b=gdidTag[1]}if(typeof a=="undefined"){var a=false}if(a){this._memologLcs(b)}else{this._mylogLcs(b)}},_mylogLcs:function(b){var a="blog";if(location.href.indexOf("/PostThumbnailView.nhn")>-1||location.href.indexOf("/PostView.nhn")>-1||location.href.indexOf("/PostList.nhn")>-1||location.href.indexOf("/PostThumbnailView.naver")>-1||location.href.indexOf("/PostView.naver")>-1||location.href.indexOf("/PostList.naver")>-1){if(isBlogMe){a+="_blogme"}if(isFromSection){a+="_home"}if(isFirstPage){a+="_first"}else{if(isFromSearch||isFromSection){a+="_next"}else{if(isThumbnailList){a+="_thumbnail_list"}else{if(isThumbnailView){a+="_thumbnail_post"}else{a+="_post"}}}}utility.writeNewLcs(b,"sti",a,isBlogMe,blogId);return}if(a=="blog"&&(typeof b!="undefined"&&b!="")){utility.writeNewLcs(b)}else{utility.writeNewLcsNonGdid()}},_memologLcs:function(a){if(a!=""){utility.writeNewLcs(a)}else{utility.writeNewLcsNonGdid()}}});new WriteNewLcs();nhn.music={openLyricPopup:function(a){window.open("http://music.naver.com/lyric/index.nhn?trackId="+a,"","width=400, height=300");return false}};var PostViewVisitRecordHandler=$Class({$init:function(b,a){this.activate();if(!this._isActivated){return}this._initPostValue(b,a);this._setEvents();this.timerStart()},_initPostValue:function(b,a){this._blogId=b;this._logNo=a},_setEvents:function(){$Fn(this.timerStop,this).attach(window,"beforeunload")},postChange:function(b,a){if(!this._isActivated){return}this.timerStop();this._initPostValue(b,a);this.timerStart()},timerStart:function(){if(!this._isActivated){return}this._startTime=+new Date},timerStop:function(){if(!this._isActivated){return}this._stopTime=+new Date;this._save()},_save:function(){var a={blogId:this._blogId,logNo:this._logNo,elapsed:this._stopTime-this._startTime};$Ajax("/PostViewVisitRecord.naver",{method:"post"}).request({stat:$Json(a).toString()})},activate:function(){if(location&&location.search&&location.search.indexOf("noRecord=true")>0){this._isActivated=false}else{this._isActivated=true}}});var PostController=$Class({$jsMVC:jsMVC.$Controller,$init:function(){this.setLayerAreaEvent();var a=paramLogNo;if(!a&&(pagePerPostCount==1&&nFirstLogNo)){a=nFirstLogNo}if(a){this.oPostViewVisitRecordHandler=new PostViewVisitRecordHandler(blogId,a)}},start:function(){this.mNoticeLayerRemove=jsMVC.getModel("postController","noticeLayerRemoveModel");this.vNoticeLayerPostTop=jsMVC.getView("postController","noticeLayerPostTopView");setTimeout($Fn(this.setAdditionalLayer,this).bind(this),600)},setLayerAreaEvent:function(){if($("noticeLayer")!=null){$Fn(this._onClick,this).attach($("noticeLayer"),"click")}},_onClick:function(d){var e=d.element;var c=$Element(e);var b=utility.getElement(e,"a")||e;var g=$Element(b);var f=utility.getParam(g.className()!=""?g.className():c.className());if(g.hasClass("_hideNoticeLayer")){this.removeNoticeLayer(f[0],f[1],f[2]);nclk_v2(b,"pro.shut","","")}else{if(utility.getElement(e,"a")==null){var a=$Element("noticeLayer").queryAll("a");if(a==null){return}for(i=0;i<a.length;i++){if(a[i]!=null||a[i].href.indexOf("http")==0){a[i].click();break}}}else{nclk_v2(b,"pro.content","","")}}},removeNoticeLayer:function(a,c,b){this.mNoticeLayerRemove.removeNoticeLayer(a,c,b)},onClickNaverMeSubscribe:function(){this.vDoMe2Day.doSubscribeClick()},doMouseOver:function(b){var c=b.element;var a=$Element(cssquery.getSingle("!a",c)?cssquery.getSingle("!a",c):c);if(a.hasClass("_clearDefaultText")){utility.clearInputElDefaultTxt(c)}if(a.hasClass("_returnFalse")){b.stop()}},doMouseOut:function(b){var c=b.element;var a=$Element(cssquery.getSingle("!a",c)?cssquery.getSingle("!a",c):c);if(a.hasClass("_clearDefaultText")){utility.clearInputElDefaultTxt(c)}if(a.hasClass("_returnFalse")){b.stop()}},setAdditionalLayer:function(){this.setBlogTeamBuddySuggestLayer();this.setBuddyRecommendLayer()},setBlogTeamBuddySuggestLayer:function(){try{if(!isAfterWrite||!blogOwner){return}new FirstWriterBlogTeamRecommendController()}catch(a){}},setBuddyRecommendLayer:function(){if(!isRecommendedBlog){return}var c="afp.dadd";var a="afp.dclose";var b="fromVisit";new BuddyRecommendController(c,a,$Element("buddyRecommendLayer"),b).start()}});var NoticeLayerRemoveModel=$Class({$init:function(){this.afterRemoveNoticeLayer=new jsMVC.Event()},removeNoticeLayer:function(a,c,b){var d=new $Ajax("/NoticeLayerRemoveAsync.naver",{method:"post",onload:$Fn(function(e){this.afterRemoveNoticeLayer.notify(e.json())},this).bind()});d.request({noticeSeq:a,noticeLayerViewType:c,endDate:b})}});var NoticeLayerPostTopView=$Class({$init:function(){this.mNoticeLayerRemove=jsMVC.getModel("postController","noticeLayerRemoveModel");this.mNoticeLayerRemove.afterRemoveNoticeLayer.attach($Fn(function(a){this.hideNoticeLayer(a)},this).bind())},hideNoticeLayer:function(){$Element($("noticeLayer")).hide();if($("noticelayercontents_bottom")){$Element($("noticelayercontents_bottom")).hide()}}});var NoticePostController=$Class({$jsMVC:jsMVC.$Controller,$init:function(){},start:function(){this.mNoticePost=jsMVC.getModel("noticePostController","noticePostModel");this.vNoticePost=jsMVC.getView("noticePostController","noticePostView")},setEvent:function(){$Fn(this.doClick,this).attach($("content-area"),"click")},doClick:function(c){var d=c.element;var b=utility.getElement(d,"a")||d;var a=$Element(cssquery.getSingle("!a",d)?cssquery.getSingle("!a",d):d);if(a.hasClass("_noticePost.remove")){this.doRemove(utility.getParam(b.className))}if(a.hasClass("_returnFalse")){c.stop()}},remove:function(b){try{this.mNoticePost.remove(b)}catch(a){utility.nvl_error(a,blogURL+"/NoticePostController.js/NoticePostController/remove",a.lineNumber);throw a}},add:function(b){try{this.mNoticePost.add(b)}catch(a){utility.nvl_error(a,blogURL+"/NoticePostController.js/NoticePostController/add",a.lineNumber);throw a}}});var NoticePostModel=$Class({htAPI:{remove:"/NoticePostRemoveAsync.naver",add:"/NoticePostAddAsync.naver",getCount:"/NoticePostCountAsync.naver"},$init:function(){this.removeView=new jsMVC.Event();this.addView=new jsMVC.Event()},remove:function(e){var c=e[0];var b=e[1];var a=e[2];if(a=="false"){if(!confirm("이 공지를 내리시겠습니까?")){return}}var f={blogId:c,logNo:b};var d=new $Ajax(this.htAPI.remove,{method:"POST",onerror:function(){},onload:$Fn(function(g){this.removeView.notify(g)},this).bind()});d.request(f)},add:function(e){var c=e[0];var b=e[1];var a=this._getCount(c);if(a>=maxNoticePostCount){alert("공지는 최대 "+maxNoticePostCount+"개까지 등록하실 수 있습니다.\n이 글을 공지로 등록하시려면 기존 공지를 내리고 등록해주세요.");return}var f={blogId:c,logNo:b};var d=new $Ajax(this.htAPI.add,{method:"POST",onerror:function(){},onload:$Fn(function(g){this.addView.notify(g)},this).bind()});d.request(f)},_getCount:function(b){var a=0;var d={blogId:b};var c=new $Ajax(this.htAPI.getCount,{method:"POST",onerror:function(){},onload:$Fn(function(e){a=e.json()},this).bind(),async:false});c.request(d);return a}});var NoticePostView=$Class({$init:function(){this.model=jsMVC.getModel("noticePostController","noticePostModel");this._remove();this._add()},_remove:function(){this.model.removeView.attach($Fn(function(b){var a=b.json();if(a==true){alert("이 글을 공지에서 내렸습니다.");location.reload(true)}else{alert("공지 내리기에 실패 하였습니다.")}},this).bind())},_add:function(){this.model.addView.attach($Fn(function(b){var a=b.json();if(a==true){alert("글이 공지로 등록되었습니다.");location.reload(true)}else{alert("공지 등록에 실패 하였습니다.")}},this).bind())}});var OpenGraphLinkVideoExecutor=function(a){var f=a;var e=function(){var g=$$("a._ogvideo");if(g==null||g.length==0){return}for(var h=0;h<g.length;h++){var j=g[h];$Fn(b).attach(j,"click")}};var b=function(l){var h=$Element(l.element).query("! a._ogvideo")||l.element;var g=$Element(h);var j=g.attr("_embedUrl");if(j==null){return}var n=d(j);if(n==null){return}var m=g.query("! div.thumb");if(m==null){return}l.stop();var k=$Element(m);if(k.hasClass("s_size")){k.removeClass("s_size");k.addClass("b_size")}n.execute(k,j,f)};var d=function(h){for(var g in c){if(!c.hasOwnProperty(g)){continue}var j=c[g];if(j.matching(h)){return j}}};var c={youtube:{execute:function(l,m){var k=l.width();var g=l.height();var n=$Element(l.query("img"));var j=n.attr("src");j=j.replace(/type=f[_\d]+/,"");var h=$Element("<div style='position:relative;width:100%'><img class='_hiddenimg' src='"+j+"type=f560_336' style='width:100%;visibility:hidden'/><iframe src='"+m+"?autoplay=1&autohide=1' frameborder='0' style='position:absolute;top:0;left:0;width:100%;height:100%' allowfullscreen/></div>");l.hide();l.after(h);$Fn(function(){if(f&&typeof f=="function"){f()}}).attach(h.query("._hiddenimg"),"load")},matching:function(g){return/https:\/\/www\.youtube\.com\/embed\/[^\/]+/.test(g)}}};return{init:e}};(function(d){var g=function(t,m,p,s,o,q,n){a(t,m,p,s,q,n)};var j=d.ccsrv||"cc.naver.com";var h=d.nsc||"decide.me";var b={};var e=d.g_allowedOrigin||"";var l={};g.vs="0.8.1";g.md="cc";g.pt="https:";g.ec=encodeURIComponent;g.st=1;g.ua={};if(self!==parent&&!!e){parent.postMessage("getLCSInfo",e);window.addEventListener("message",function(m){if(m.origin!==e){return}l=JSON.parse(m.data)},false)}(function c(){try{if(typeof navigator==="undefined"||!navigator||!navigator.userAgentData){return false}var r=navigator.userAgentData;var o=r.uaList||r.brands;var n=["architecture","model","platform","platformVersion","uaFullVersion","fullVersionList"];var m=function(t,s){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()===s.toLowerCase()};var q=function(w,v){var v=v?v+"_":"";if(!m(w,"array")){return}for(var u=0,s=w.length;u<s;u++){if(!m(w[u],"object")){continue}for(var t in w[u]){g.ua[v+t+"_"+u]=w[u][t]||""}}};g.ua.mobile=r.mobile;q(o);navigator.userAgentData.getHighEntropyValues(n).then(function(t){for(var s in n){var u=n[s];if(u=="fullVersionList"){q(t[u],"full")}else{g.ua[u]=t[u]||""}}})}catch(p){console.warn(p)}})();function f(u,n,q,t,p,s){var m=d.g_nclk_proxy||"";if(m&&u.href){u.href=m+g.ec(u.href)}return g(u,n,q,t,p,s)}function k(m){var n=m||{};if(!n.e||!n.a){return}b.g_ssc=n.g_ssc||"";b.g_query=n.g_query||"";b.g_sid=n.g_sid||"";b.g_pid=n.g_pid||"";b.g_lcsurl=n.g_lcsurl||"";b.g_lcssti=n.g_lcssti||"";a(n.e,n.a,n.i,n.r,n.g,n.pid);b={}}function a(x,z,t,n,v,u){var q,s,B,y;var A=x;var p=x;if("nodeType" in x&&x.nodeType>=1){A=window.event||x}else{if(x){var w=x.srcElement||x.currentTarget||x.target;if(w){p=g.findLink(w)}}}if(!v){v=""}y=g.gcp(p,A);B=g.gl(z,t,n,y,"",0,g.st,v,u);s=g.l(p,B);g.sd(s);return true}g.findLink=function(n){var m=n;while(m&&m.tagName!=="BODY"&&m.tagName!=="HTML"){if(m.tagName==="A"||!m.parentNode){break}m=m.parentNode}if(m.tagName!=="A"){m=n}return m};g.l=function(q,n){var m,r,p;if(q&&q.href&&q.getAttribute("href")){r=q.tagName.toLowerCase();p=q.href.toLowerCase();if(p&&p.indexOf(g.pt+"//"+j)==0){m=q.href}else{if(p&&p.indexOf(g.pt+"//"+j)!=0&&r&&r!="img"){m=n+"&u="+g.ec(q.href)}}return m}return n+"&u=about%3Ablank"};g.sendByBeacon=function(m){var n=m.split("?");navigator.sendBeacon(n[0],n[1])};g.sendByImage=function(m){var n=new Date().getTime();(new Image()).src=m+"&nt="+n};g.sd=!!navigator.sendBeacon?g.sendByBeacon:g.sendByImage;g.ggv=function(m){return b[m]||d[m]||""};g.gl=function(G,D,z,n,w,B,x,E,y){var v=g.ggv("g_ssc");var o=g.ggv("g_query");var q=g.ggv("g_pid");var H=g.ggv("g_sid");var I=g.ggv("g_lcsurl")||l.g_lcsurl||window.location.href;var A=g.ggv("g_lcssti")||l.g_lcssti||null;var t=d.lcs_get_lpid||l.lcs_get_lpid||null;if(B==undefined){B=1}if(x==undefined){x=1}var C=g.pt+"//"+j+"/"+g.md+"?a="+G+"&r="+z+"&i="+D+"&m="+B;if(x==1){if(v){C+="&ssc="+v}if(o){C+="&q="+g.ec(o)}if(H){C+="&s="+H}if(y){C+="&p="+y}else{if(q){C+="&p="+q}else{if(t){C+="&p="+(typeof t=="function"?t():t)}else{console.warn("'g_pid / lcs_get_lpid' is not exist.")}}}}else{C+="&nsc="+h;console.warn("[DEPRECATED] NSC mode")}if(E){C+="&g="+E}if(w){C+="&u="+g.ec(w)}if(I){C+="&lcsurl="+g.ec(I)}if(A){C+="&lcssti="+A}if(n){C+=n}var F,p;for(F in g.ua){p=g.ua[F];if(p){C+="&ua_"+F+"="+g.ec(p)}}return C};g.al=function(o,n){var m=window;if(m.addEventListener){m.addEventListener(o,n,false)}else{if(m.attachEvent){m.attachEvent("on"+o,n)}}};g.gsbw=function(){var o=document.createElement("p");o.style.width="200px";o.style.height="200px";var p=document.createElement("div");p.style.position="absolute";p.style.top="0px";p.style.left="0px";p.style.visibility="hidden";p.style.width="200px";p.style.height="150px";p.style.overflow="hidden";p.appendChild(o);document.body.appendChild(p);var n=o.offsetWidth;p.style.overflow="scroll";var m=o.offsetWidth;if(n==m){m=p.clientWidth}document.body.removeChild(p);return(n-m)};g.fp=function(n){var o=curtop=0;try{if(n.offsetParent){do{o+=n.offsetLeft;curtop+=n.offsetTop}while(n=n.offsetParent)}else{if(n.x||n.y){if(n.x){o+=n.x}if(n.y){curtop+=n.y}}}}catch(m){}return[o,curtop]};g.ws=function(o){if(!o){o=window}var m=0;if(o.innerWidth){m=o.innerWidth;if(typeof(o.innerWidth)=="number"){var n=g.gsbw();m=o.innerWidth-n}}else{if(document.documentElement&&document.documentElement.clientWidth){m=document.documentElement.clientWidth}else{if(document.body&&(document.body.clientWidth||document.body.clientHeight)){m=document.body.clientWidth}}}return m};g.ci=function(t){var q=document.URL;var s=t.parentNode;var m;var o;var n;if(s==null||s==undefined){return false}while(1){if(s.nodeName.toLowerCase()=="#document"){if(s.parentWindow){m=s.parentWindow}else{m=s.defaultView}try{if(m.frameElement!=null&&m.frameElement!=undefined){if(m.frameElement.nodeName.toLowerCase()=="iframe"){o=m.frameElement.id;if(!o){return false}return o}else{return false}}else{return false}}catch(r){return false}}else{s=s.parentNode;if(s==null||s==undefined){return false}}}};g.gcp=function(r,t){var v=-1;var u=-1;var x=-1;var w=-1;var n,m,p;var o="";var q=window.event?window.event:r;if(t){q=t||window.event}try{bw=g.ws(window);p=g.ci(r);if(p){var s=g.fp(document.getElementById(p));if(q.clientX&&q.clientX!=undefined){n=document.body;if(n.clientLeft&&n.clientTop){ifrSx=q.clientX-n.clientLeft;ifrSy=q.clientY-n.clientTop}else{ifrSx=q.clientX;ifrSy=q.clientY}}x=s[0]+ifrSx;w=s[1]+ifrSy;if(document.body&&(document.body.scrollTop||document.body.scrollLeft)){n=document.body;v=x-n.scrollLeft;u=w-n.scrollTop}else{if(document.documentElement&&(document.documentElement.scrollTop||document.documentElement.scrollLeft)){m=document.documentElement;v=x-m.scrollLeft;u=w-m.scrollTop}else{v=x;u=w}}}else{if(q.clientX&&q.clientX!=undefined){n=document.body;if(n.clientLeft&&n.clientTop){v=q.clientX-n.clientLeft;u=q.clientY-n.clientTop}else{v=q.clientX;u=q.clientY}}if(document.body&&(document.body.scrollTop||document.body.scrollLeft)){x=document.body.scrollLeft+(v<0?0:v);w=document.body.scrollTop+(u<0?0:u)}else{if(document.documentElement&&(document.documentElement.scrollTop||document.documentElement.scrollLeft)){m=document.documentElement;if(m.scrollLeft!=undefined){x=m.scrollLeft+(v<0?0:v)}if(m.scrollTop!=undefined){w=m.scrollTop+(u<0?0:u)}}else{x=(v<0?0:v);w=(u<0?0:u)}}if(q.pageX){x=q.pageX}if(q.pageY){w=q.pageY}}}catch(t){}if((x!=-1)&&(w!=-1)){o+="&px="+x+"&py="+w}if((v!=-1)&&(u!=-1)){o+="&sx="+v+"&sy="+u}return o};d.nclk_proxy=f;d.nclk=g;d.nclk_v2=a;d.nclk_v2_with_obj=k})(window);var APIS={TOKEN_FORMAT:"/v1/react/token",TOKEN_QUERY_FORMAT:"?pool={0}&isDuplication={1}",LIKE_FORMAT:"/v1/services/{0}/contents/{1}",LIKE_QUERY_FORMAT:"?pool={0}&_method={1}&reactionType={2}&displayId={3}&isDuplication={4}&categoryId={5}&guestToken={6}&timestamp={7}",SEARCH_FORMAT:"/v1/search/contents",SEARCH_QUERY_FORMAT:"?pool={0}&q={1}%5B{2}%5D&isDuplication={3}",BULK_SIZE:10,};var NaverVideoLikeClient=function(a,b,c){this._serviceConfig=a;this._extHttpGetJsonp=b;this._extAuthFailure=c;this._contentIds=JSON.parse(this._serviceConfig.contentIds);this._serviceId=this._serviceConfig.serviceId;this._isDuplication=this._serviceConfig.isDuplication;this._reactionType=this._serviceConfig.reactionType;this._displayId=this._serviceConfig.displayId;this._categoryId=this._serviceConfig.categoryId;this._partnerId=this._serviceConfig.partnerId;this._providerId=this._serviceConfig.providerId;this._isNotOpendBlogUser=this._serviceConfig.isNotOpenBlogUser;this._fnDomainRegisterLayerOpen=this._serviceConfig.fnDomainRegisterLayerOpen;this._pool="blogid";this._lookupDataMap={};this._instanceUpdatePlayerMap=[];this._apigw="";if(this._formatString){this._apigw=this._formatString(a.apiGwUrl,this._partnerId,this._providerId)}};NaverVideoLikeClient.prototype._formatString=function(b){var a=Array.prototype.slice.call(arguments,1);return b.replace(/{(\d+)}/g,function(c,d){return typeof a[d]!="undefined"?a[d]:c})};NaverVideoLikeClient.prototype._sendRequestGet=function(c,e,d){var b=this;var a=d;if(this._extHttpGetJsonp&&typeof this._extHttpGetJsonp==="function"){this._extHttpGetJsonp(c+e,d,function(f){if(f&&f.statusCode===401){b._extAuthFailure(f.message)}else{alert(f.message)}})}else{if(a&&typeof a==="function"){a&&a({error:"Request failed - 0x0002"})}}};NaverVideoLikeClient.prototype._getDivList=function(a,e){var f=[];var d=[];var c=e||20;for(var b in a){if(a.hasOwnProperty(b)){d.push(a[b])}if(d.length>=c){f.push(d);d=[]}}if(d.length>0){f.push(d);d=[]}return f};NaverVideoLikeClient.prototype._parseLookupData=function(d){var b=d.reactions;if(b&&this._isArray(b)){for(var a=0;a<b.length;a++){var c=b[a];if(c&&c.reactionType==="like"){return{contentsId:d.contentsId,isReacted:c.isReacted,count:c.count}}}}return{contentsId:d.contentsId,isReacted:false,count:0}};NaverVideoLikeClient.prototype._getVideoIdInContentsId=function(b){if(!b||typeof b!=="string"){return""}var a=b.split("_").reverse();return a[0]};NaverVideoLikeClient.prototype._isArray=function(a){return Object.prototype.toString.call(a)==="[object Array]"};NaverVideoLikeClient.prototype.updateLookupTable=function(){var a=this;this.reqGetLookupLikeIt(function(d){if(!d.error&&a._isArray(d.contents)){var e=d.contents;for(var c=0;c<e.length;c++){var g=e[c];var f=a._parseLookupData(g);var b=a._getVideoIdInContentsId(f.contentsId);if(b){a.addLookupData(b,f)}}}})};NaverVideoLikeClient.prototype.reqGetLookupLikeIt=function(j){var h=this._serviceId;var g=this._isDuplication;var c=this._contentIds;if(c!=null&&typeof c==="object"){var b=(this._apigw+APIS.SEARCH_FORMAT);var f=this._getDivList(c,APIS.BULK_SIZE);for(var e=0;e<f.length;e++){var d=f[e];var a=this._formatString(APIS.SEARCH_QUERY_FORMAT,this._pool,h,d,g);this._sendRequestGet(b,a,j)}}else{if(j&&typeof j==="function"){j({error:"Request failed - 0x0001"})}}};NaverVideoLikeClient.prototype.reqGetGuestToken=function(c){var a=(this._apigw+APIS.TOKEN_FORMAT);var b=this._formatString(APIS.TOKEN_QUERY_FORMAT,this._pool,this._isDuplication);this._sendRequestGet(a,b,c)};NaverVideoLikeClient.prototype._sendLike=function(g,c,e,d,h){var j=d.guestToken;var f=d.timestamp;var b=(this._apigw+this._formatString(APIS.LIKE_FORMAT,this._serviceId,c));var a=this._formatString(APIS.LIKE_QUERY_FORMAT,this._pool,e?"POST":"DELETE",this._reactionType,this._displayId,this._isDuplication,this._categoryId,j,f);var k=h;this._sendRequestGet(b,a,function(m){var n=m.isReacted;var l=m.count;k&&k(n,l)})};NaverVideoLikeClient.prototype.updatePlayer=function(d){if(!d){return}var a=d.vid;var c=!d.checked;var b=this._contentIds[a];if(this._isNotOpendBlogUser==true){this._fnDomainRegisterLayerOpen();return}this.toggleLikeAndRefresh(d.vid,b,c,function(f,e){d.updateLikeIt(f,e)})};NaverVideoLikeClient.prototype.onPlayer=function(e){if(!e){return}var a=e.vid;var b=this._lookupDataMap[a];if(!b){return}var d=b.isReacted;var c=b.count;e.updateLikeIt(d,c)};NaverVideoLikeClient.prototype.toggleLikeAndRefresh=function(a,d,f,h){var c=this;var e=f;var b=a;var g=d;this.reqGetGuestToken(function(j){if(j&&!j.error){setTimeout(function(){c._sendLike(b,g,e,j,h)},0)}else{if(h&&typeof h==="function"){h({error:"Request failed  - 0x0004"})}}})};NaverVideoLikeClient.prototype.addLookupData=function(a,b){this._lookupDataMap[a]=b};NaverVideoLikeClient.prototype.hasLookupData=function(a){return this._lookupDataMap[a]?true:false};NaverVideoLikeClient.prototype.getLookupDataByVid=function(a){return this._lookupDataMap[a]};NaverVideoLikeClient.prototype.getLookupAllData=function(a){return this._lookupDataMap};NaverVideoLikeClient.prototype.hasCookieValue=function(a){var b=document.cookie.match("(^|;) ?"+a+"=([^;]*)(;|$)");return(b&&b[2])};var initRabbit=function(k){if(typeof SmartEditorViewer==="undefined"){return}var f=new SmartEditorViewer();var a=k.deviceType;var g=k.afterLoad.eventByType||{};var b=k.imageThumbnailType||"w966";var h=function(l){return !isNaN(parseFloat(l))&&isFinite(l)};var j=h(k.fontSize)?parseFloat(k.fontSize):0;var c={map:{isStop:false,callback:function(m,l){}},img:{isStop:true,callback:function(l){}},sticker:{isStop:true,callback:function(l){}},file:{isStop:true,callback:function(l){}}};var e=k.afterLoad.linkResolver||{};for(var d in e){if(e.hasOwnProperty(e[d])){continue}c[d]=e[d]}f.bootstrap({productEnv:{deviceType:a||"desktop",viewerType:"normal",buildEnv:"real"},serviceConfig:{serviceId:"blog",serviceName:"블로그",inApp:false},productConfig:{language:"ko-KR",imageThumbnailType:b},plugins:{video:{serviceId:{dev:20002,stage:2,real:2},player:{contextmenu:[{id:"help",label:"도움말"},{id:"license",label:"라이센스"}],controls:{appLink:false,title:true,social:true,like:k.likeItVideoEnable,playCount:true,likeCount:k.likeItVideoEnable,subtitle:true,addSubtitle:k.isVideoSubtitleInsertEnable},externalURLParams:{adt:"glad"}}}},events:{ready:function(){for(var l in g){if(g.hasOwnProperty(g[l])){continue}f.onEventByType(l,g[l])}f.onLinkResolver(c);if(k.afterLoadComplete){k.afterLoadComplete()}}}});if(typeof j!=="undefined"&&j!=-1){f.changeDocFontSize(j)}return f};$Fn(function(){var h=function(){var j={wrapperDivId:"domainRegisterWrap",title:"공감을 남기려면 블로그 아이디가 필요해요.",confirmBtnValue:"아이디 만들기",win:window,isLightVersion:true,clickCodePrefix:"bsu*l.like",initialCode:"bsu*l.like",callbackFn:function(){location.reload()},apiUrl:{recommendDomainListUrl:"/blogdomain/RecommendBlogDomainList.naver",duplicateCheckUrl:"/blogdomain/BlogDomainDuplicateCheck.naver",blogDomainRegisterUrl:"/blogdomain/BlogDomainRegistration.naver"}};blogDomainRegisterLayer.init(j);blogDomainRegisterLayer.show()};if(typeof NaverVideoLikeClient!=="undefined"&&likeItVideoEnable){window.naverVideoLikeClient=new NaverVideoLikeClient({serviceId:"blog",categoryId:"video",isDuplication:false,reactionType:"like",displayId:"BLOG",partnerId:"blogfe",providerId:"like",contentIds:likeItVideoContentsIdMapJson,apiGwUrl:apiGwUrl+"{0}/{1}",isNotOpenBlogUser:gbIsNotOpenBlogUser,fnDomainRegisterLayerOpen:h},function(l,m,k){var j=this;new $Ajax(l,{type:"jsonp",method:"get",jsonp_charset:"utf-8",onload:function(n){if(n&&n.json()&&n.json().statusCode&&n.json().statusCode!==200){k(n.json())}else{m.call(j,n.json())}},callbackname:"callback"}).request({suppress_response_codes:true,})},function(k){var j=window.confirm(k);if(j){window.location.href="https://nid.naver.com/nidlogin.login?mode=form&url="+encodeURIComponent(window.location.href)}});naverVideoLikeClient.updateLookupTable()}var f=(function(){var k=function(l){if(typeof naverVideoLikeClient==="undefined"||naverVideoLikeClient==null){return}naverVideoLikeClient.updatePlayer(l)};var j=function(l){if(typeof naverVideoLikeClient==="undefined"||naverVideoLikeClient==null){return}naverVideoLikeClient.onPlayer(l)};return{videoResolver:k,videoOnPlayer:j}})();var b=(function(){var l=typeof window.aPostFiles=="undefined"?[]:window.aPostFiles;var v=null;var o=function(y){var x=y.split("/");if(x.length<6){return""}return x[5]};var u=function(){if(v!=null){return v}v={};for(var y=1;y<l.length;y++){var z=l[y];for(var x=0;x<z.length;x++){var B=z[x];var A=o(B.encodedAttachFileUrl);v[A]=B}}return v};var j=function(x){return x.punishType!=0};var p=function(x){return x.ahfLicenseYn=="true"};var m=function(x){return x.maliciousCodeYn=="true"};var s=function(x){var y=true;var z=null;if(!x){y=false;z=function(){}}else{if(j(x)){y=false;z=function(){postView.showBlockAlertLayer(null,x.encodedAttachFileName,x.encodedAttachFileUrl,-1,x.punishType)}}else{if(p(x)){y=false;z=function(){postView.showAhfLicenseAlertLayer(null,x.encodedAttachFileName,x.encodedAttachFileUrl,-1)}}else{if(m(x)){y=false;z=function(){postView.showMalwareAlertLayer(null,x.encodedAttachFileName,x.encodedAttachFileUrl,-1)}}}}}return{isNormal:y,showAlert:z}};var n=function(x){if(typeof x=="undefind"||!x){return null}var y=u();var z=o(x);return y[z]};var t=function(x){k(x,function(y,z){if(typeof oLayoutExecutor=="undefined"){z.stop();return}var A=y.encodedAttachFileUrl;if(typeof blogOwner!="undefined"&&blogOwner===true){A=A.replace("naver.net","naver.com")}oLayoutExecutor.openNdrive(A,y.encodedAttachFileNameByUTF8,Number(y.attachFileSize.replace(/,/g,"")))})};var w=function(x){r(x,function(y,z){window.open(y)})};var r=function(z,B){var A=z.event;var y=n(z.link);var x=s(y);if(!x.isNormal){A.preventDefault();x.showAlert();return}B(z.link,A)};var k=function(z,B){var A=z.event;var y=n(z.link);var x=s(y);if(!x.isNormal){A.preventDefault();x.showAlert();return}B(y,A)};var q=function(x){if(x.type=="cloud"){t(x)}else{w(x)}};return{onClickDownload:q}})();var a=(function(){var j=function(m,q){var p=m.link;var r=q.target;if(m.linkUse=="true"&&p){window.open(p);return}var o=$Element(r);var l=$Element(o.query("!div._post_wrap"));if(l){var k=utility.getParam(l.attr("className"))[0];var n=gdidTag[k]}};return{open:j}})();var e=(function(){var j=function(k){window.open(gsGfMarketUrl+"/sticker/detail/code/"+k.packCode,"_blank")};return{openGfMarket:j}})();var g=(function(){var k=function(n,q){nclk_v2(q,"pst.locationmap","","","");var p=null;var m=n.placeId||n.locationId;var r=n.title||n.name;var o=encodeURIComponent(r);var l=n.address||"";switch(n.searchEngine){case"naver":case"NAVER":if(!n.searchType||!m){p="https://map.naver.com/v5/?zoom=14&type=0&title="+o+"&lat="+n.latitude+"&lng="+n.longitude}else{p="https://map.naver.com/v5/entry/place/"+m}break;case"google":case"GOOGLE":if(l.indexOf("일본")!=-1){m=j(m)}p="https://www.google.com/maps/search/?api=1&query="+o+"&query_place_id="+m;break}if(p!=null){window.open(p,"_blank")}q.preventDefault()};var j=function(l){var m=l;new $Ajax("/ReplacementPlaceIdAsync.naver",{method:"get",onload:$Fn(function(o){var n=o.json();if(n.status==="OK"){m=n.result.place_id}},this).bind(),async:false}).request({placeId:l});return m};return{toMap:k}})();var d=(function(){var j=function(l,m){if(!l.link){return}var k=l.link};return{openLink:j}})();var c=(function(){var j=function(k,l){if(imageLazyLoadVisible!=undefined&&imageLazyLoadVisible.check!=undefined){imageLazyLoadVisible.check()}};return{loadImage:j}})();if(initRabbit){setTimeout(function(){var l=[];var j=function(o){var n=o.player;if(aPostVideoInfo==null){return}aPostVideoInfo.forEach(function(p){p.forEach(function(r){if(r.vid===o.vid){var z=[];if(!r.hasLink){z.push("social")}if(likeItVideoIdListJson!=null&&!likeItVideoIdListJson.includes(r.vid)){z.push("like");z.push("likeCount")}o.hideControls(z);if(z.indexOf("social")>-1&&z.indexOf("like")>-1&&z.indexOf("likeCount")>-1){o.player.querySelector("pzp-ui-toolbar-expand-button").style.display="none"}if(n){var u=n.querySelector("pzp-content-title");if(u){u.target="_blank"}var q=n.querySelector("pzp-pc-like-button");if(q){q.addEventListener("click",function(A){A.preventDefault()})}}if(window.__splugin){var y="";if(isDevPhase==="true"){y="dev."}else{if(isStagePhase==="true"){y="stage."}}var v=location.protocol+"//"+y+"blog.naver.com/"+blogId+"/"+r.belongedLogNo;var s=null;if(o&&o.player){if(o.version==="v1"){s=o.player.querySelector("pzp-pc-content-title").getAttribute("refinedTitle")}else{s=o.player.querySelector("pzp-pc-content-title").getAttribute("title")}}var t={evKey:"blog",serviceName:"블로그",url:v,sourceName:blogNicknameOrBlogId};if(s){t.title=s}var x=o.player.querySelector(".pzp-pc__social-plugin-container").getAttribute("id");if(x){var w=document.querySelectorAll(".pzp-pc-share-button.naver-splugin");w.forEach(function(A){if(A.getAttribute("data-player-target-id")===x){window.__splugin.update(A,t)}})}}}})})};var m=function(p){j(p);if(likeItVideoIdListJson!=null&&likeItVideoIdListJson.includes(p.vid)){f.videoOnPlayer(p)}else{p.hideControls(["like","likeCount"])}if(searchVid&&searchVid===p.vid){var o=true;var n=true;p.setAutoPlay(o);p.setMuted(n)}};var k=function(n){if(payload.menuId==="help"){window.open("https://help.naver.com/index.help","_blank")}else{if(payload.menuId==="license"){window.open("https://developers.naver.com/notice/compliance/","_blank")}else{return}}};initRabbit({deviceType:"desktop",isInApp:false,imageThumbnailType:"w966",fontSize:-1,beforeLoad:{},videoPlayerLibUrl:videoPlayerUrl,afterLoad:{eventByType:{v2_file:{onClickDownload:b.onClickDownload},v1_file:{onClickDownload:b.onClickDownload},v1_video:{onLoadPlayer:function(n){m(n)},onClickLikeIt:f.videoResolver,onClickContextMenu:function(n){k(n)}},v2_video:{onLoadPlayer:function(n){m(n)},onClickLikeIt:f.videoResolver,onClickContextMenu:function(n){k(n)}},v2_imageGroup:{onChangePosition:c.loadImage}},linkResolver:{img:{callback:a.open},sticker:{callback:e.openGfMarket},map:{callback:g.toMap},link:{callback:d.openLink}}},afterLoadComplete:function(){if(rproductId!==undefined&&rproductId!==""&&focusing){utility.gotoElWithMargin("blog_product_"+rproductId,{x:0,y:-50});if(typeof productController==="undefined"||productController===null){return}productController.showCouponLayer(paramLogNo,rproductId)}else{if(typeof searchVid!=="undefined"&&searchVid!==""&&focusing){focusing.gotoTagForPost()}}videoPlayerController.load(null,l);buyWithMyOwnMoneyController._decideClass()},likeItVideoEnable:likeItVideoEnable,isVideoSubtitleInsertEnable:isVideoSubtitleInsertEnable,})},0)}}).attach(window,"load");$Fn(function(){function b(d){var c=$Element(d);return c.hasClass("se_docSourceWriter")||c.hasClass("se_docSourceTitle")||c.hasClass("se_anniversary_box")}function a(c){if(!c.href){return}if(!b(c)){return}if(!c.target){c.target="_top"}}$A($$(".se_component a")).forEach(a)}).attach(window,"load");jsMVC.setController("postController",PostController);jsMVC.setModel("postController","noticeLayerRemoveModel",NoticeLayerRemoveModel);jsMVC.setView("postController","noticeLayerPostTopView",NoticeLayerPostTopView);var postController=jsMVC.getController("postController");postController.start();jsMVC.setController("noticePostController",NoticePostController);jsMVC.setModel("noticePostController","noticePostModel",NoticePostModel);jsMVC.setView("noticePostController","noticePostView",NoticePostView);var noticePostController=jsMVC.getController("noticePostController");noticePostController.start();$Fn(function(){OpenGraphLinkVideoExecutor().init()}).attach(window,"load");var ParamUtil=$Class({_rxParameter:/_param\((.*)\)/,getParam:function(a){if(a&&typeof a=="string"){var b=a.match(this._rxParameter);if(b&&b[0]&&b[1]){return b[1].split("|")}}return null}});var paramUtil=new ParamUtil();var LocalStorage=$Class({$init:function(b,a){if(typeof b=="undefined"||b==null){throw new Error("LocalStorage must defined key")}this.storage=this._initStorage();this.key=b;this.size=(typeof(a)=="undefined"||a==null||a<0)?0:a},readSet:function(){var a=this.getItem();if(typeof(a)=="undefined"||a==null){a=[]}return a},addSet:function(b){var a=this.readSet();if(this.size>0&&a.length>=this.size){a.shift()}if(a.indexOf(b)<0){a.push(b)}this.setItem(a)},getItem:function(){var a=this.storage.getItem(this.key);if(typeof(JSON)=="object"&&typeof(JSON.parse)=="function"){return JSON.parse(a)}else{return jindo.$Json(a).toObject()}},setItem:function(b){var a;if(typeof(JSON)=="object"&&typeof(JSON.stringify)=="function"){a=JSON.stringify(b)}else{a=jindo.$Json(b).toString()}this.storage.setItem(this.key,a)},removeItem:function(){this.storage.removeItem(this.key)},_initStorage:function(){if(this._isStorageAvailable(window.localStorage)){return window.localStorage}else{if(this._isStorageAvailable(window.sessionStorage)){return window.sessionStorage}else{return new FakeStorage()}}},_isStorageAvailable:function(d){var a="___persist___";if(!d){return}var b="__tmp__"+a;try{d.setItem(b,a)}catch(c){return false}return d.getItem(b)===a}});var FakeStorage=$Class({$init:function(){this.fakeStorage={}},getItem:function(a){return this.fakeStorage[a]||null},setItem:function(a,b){return this.fakeStorage[a]=b},removeItem:function(a){if(this.fakeStorage[a]){delete this.fakeStorage[a]}}});var SaveScrollStatusHandler=$Class({$init:function(a){this.localStorage=new LocalStorage("scroll.save.status",2);this.statusHandlers=a},moveSavedScroll:function(){if(this.localStorage.readSet().length!==0){var c=this.localStorage.getItem()[0];var b=this.statusHandlers;for(var d in b){var a=c[d];b[d].applyStatus(a)}this.localStorage.removeItem();return true}return false},saveScrollAndReload:function(){var b={};var a=this.statusHandlers;this.localStorage.removeItem();for(var c in a){b[c]=a[c].getStatus()}this.localStorage.addSet(b);location.reload()}});var saveScrollStatusHandler=new SaveScrollStatusHandler({scroll:{getStatus:function(){return $Document(document).scrollPosition()},applyStatus:function(a){window.scrollTo(a.left,a.top)}},sideCategory:{getStatus:function(){if(typeof floatingBarArea=="undefined"){return false}return floatingBarArea.isSideCategoryAreaOpen()},applyStatus:function(a){if(a){floatingBarArea._toggleFloatingBar();floatingBarArea._toggleSideAreaWithDataLoadIfNeed()}}}});var BuddyRecommendController=$Class({FROM_CATEGORY:"fromCategory",FROM_VISIT:"fromVisit",FROM_COMMENT:"fromComment",$init:function(d,b,a,c){this.addNclick=d;this.cancelNclick=b;this.elLayer=a;this.fromType=c;this.buddyRecommendService=new BuddyRecommendService()},start:function(){if(this.buddyRecommendService.isNotBuddyRecommendId(blogId)){return}this._setEvents();this._showLayerWithLog(this.fromType)},_setEvents:function(){$Fn(this._onClick,this).attach(this.elLayer,"click")},_onClick:function(b){var a=$Element(b.element);if(a.hasClass("_buddyRecommendCloseLayer")){this._cancelRecommend(b);return}if(a.hasClass("_addBuddy")){this._addBuddy(b);return}},_cancelRecommend:function(a){nclk_v2(a,this.cancelNclick,"","");this._saveStatusAndHideLayer(a)},_saveStatusAndHideLayer:function(a){this.buddyRecommendService.addNotBuddyRecommendId(blogId);$(this.elLayer).hide();a.stop()},_addBuddy:function(a){nclk_v2(a,this.addNclick,"","");if(!isLoggedIn){var c=window.open("","addBuddy","width=420,height=455,scrollbars=yes");if(c!=null){var b=$("addBuddyPopupForm");if(b==null){b=document.createElement("form");b.id="addBuddyPopupForm";document.body.appendChild(b)}b.target="addBuddy";b.method="post";b.action=blogURL+"/BuddyAdd.naver?blogId="+blogId;b.submit();this.elLayer.hide()}}else{this._addBuddyForLoginUser(a)}},showBlogDomainRegisterRecommend:function(){var a={wrapperDivId:"domainRegisterWrap",isLightVersion:true,title:"이웃을 추가하려면 블로그 아이디가 필요해요.",confirmBtnValue:"아이디 만들기",win:window,isChangeLayer:false,clickCodePrefix:"bsu*l.add",initialCode:"bsu*l.add",callbackFn:function(){location.reload()},apiUrl:{recommendDomainListUrl:"/blogdomain/RecommendBlogDomainList.naver",duplicateCheckUrl:"/blogdomain/BlogDomainDuplicateCheck.naver",blogDomainRegisterUrl:"/blogdomain/BlogDomainRegistration.naver",blogBasicInfoUpdateUrl:"/blogdomain/BlogBasicInfoUpdate.naver",profileImageUploadUrl:"/blogdomain/ProfileImageUpload.naver",profileImageUploadFromUrlUrl:"/blogdomain/ProfileImageUploadFromUrl.naver",blogInfoUrl:"/blogdomain/BlogBasicInfo.naver",recommendBlogByPersonalThemeListUrl:"/blogdomain/RecommendBlogByPersonalThemeList.naver",recommendBlogAddBuddyUrl:"/blogdomain/SimpleBuddyAdd.naver",recommendBlogRemoveBuddyUrl:"/blogdomain/SimpleBuddyRemove.naver",profileDefaultImageUrl:"/blogdomain/ProfileDefaultImage.naver",personalThemeUpdateUrl:"/blogdomain/SimplePersonalThemeUpdate.naver",personalThemeListUrl:"/blogdomain/SimplePersonalThemeList.naver"}};blogDomainRegisterLayer.init(a);blogDomainRegisterLayer.show()},_addBuddyForLoginUser:function(b){if(typeof readOnlyStatusAll!=="undefined"&&readOnlyStatusAll){alert(readOnlyLinkErrorMsg);return}if(gbIsNotOpenBlogUser){this.showBlogDomainRegisterRecommend();return}var a=$Element(b.element);var d=paramUtil.getParam(a&&a.className()!=""?a.className():b.className);var c=d[0];var e=new $Ajax("/BuddyAddAsync.naver",{method:"POST",onload:$Fn(function(f){var g=f.json();if(g.isSuccess==true){this._changeBuddyAddButton(a);return}else{if(g.errorCode==3){alert("상대방이 이웃 관계를 제한하여, 이웃/서로이웃을 \n신청하실 수 없습니다.");return}if(g.errorCode==4){alert("이미 서로이웃 블로그에 추가되어 있습니다.");return}if(g.errorCode==5){alert("이미 이웃 블로그에 추가되어 있습니다.");return}if(g.errorCode==10){alert("죄송합니다. 이웃수 5000명 초과로 이웃을 더 맺을 수 없습니다.");return}if(g.errorCode==11){alert("죄송합니다. 이웃수 5000명 초과로 이웃을 더 맺을 수 없습니다.");return}if(g.errorCode==12){alert("서로이웃 신청 진행중입니다.");return}if(g.errorCode==13){alert("선택하신 그룹의 이웃수 초과(500명)로 추가하실 수 없습니다. 다른 그룹을 선택해주세요.");return}if(g.errorCode==14){alert("나의 블랙리스트에 등록된 블로거 입니다.");return}if(g.errorCode==15){alert("상대방이 이웃 관계를 제한하여, 이웃/서로이웃을 \n신청하실 수 없습니다.");return}if(g.errorCode==19){alert("상대방이 이웃 관계를 제한하여, 이웃/서로이웃을 \n신청하실 수 없습니다.");return}alert("이웃추가 오류가 발생하였습니다.\n 다시 시도 해주세요.")}},this).bind(),onerror:function(){alert("이웃추가 오류가 발생하였습니다.\n 다시 시도 해주세요.")}});e.request({blogId:c})},_changeBuddyAddButton:function(a){var b=a.parent();b.remove(a);b.appendHTML('<span class="btn_add_buddy" id="addDone"><span class="ico"></span>추가완료</span>')},_showLayerWithLog:function(a){this.elLayer.show();var b=new $Ajax("/BuddyRecommendExposeCount.naver",{method:"GET",onload:$Fn(function(c){var d=c.json()},this).bind(),onerror:function(){}});b.request({fromType:a,blogId:blogId})}});var BuddyRecommendService=$Class({$init:function(){this.storage=new LocalStorage("no.buddy.recommend.id",10000)},addNotBuddyRecommendId:function(a){if(a==null||a==""){return}this.storage.addSet(a)},isNotBuddyRecommendId:function(a){if(a==null||a==""){return true}var b=this.storage.readSet();return b.indexOf(a)>=0}});var FirstWriterBlogTeamRecommendController=$Class({$init:function(){this._showLayerIfNecessary()},_setEvents:function(){$Fn(this._cancelRecommend,this).attach($$("._closeLayer"),"click");$Fn(this._addBuddy,this).attach($$("._addBuddy"),"click")},_showLayerIfNecessary:function(){var c="/FirstWriterRecommendBuddyCheckAsync.naver";var b={blogId:blogId,buddyId:"blogpeople"};var a=this;var d=$Ajax(c,{onload:function(f){var e=f.json();if(e&&e.isShowLayer){a._showLayer(e.buddyProfileImage)}}});d.request(b)},_showLayer:function(b){var c=$Template("tpl_recommend_buddy");var a=$Element("buddyRecommendLayer");if(!a){return}a.html(c.process({recommendTitle:"첫 글, 축하드려요! 이웃도 한 번 맺어볼까요?",profileImageUrl:b,blogId:"blogpeople",nickname:"Blog팀",blogName:"블로그팀 공식블로그"}));a.show();this._setEvents()},_hideLayer:function(){$Element("buddyRecommendLayer").hide()},_cancelRecommend:function(a){nclk_v2(a,"bap.close","","");this._hideLayer();a.stop()},_addBuddy:function(a){nclk_v2(a,"bap.add","","");var c=window.open("","addBuddy","width=420,height=455,scrollbars=yes");if(c!=null){var b=$("addBuddyPopupForm");if(b==null){b=document.createElement("form");b.id="addBuddyPopupForm";document.body.appendChild(b)}b.target="addBuddy";b.method="post";b.action=blogURL+"/BuddyAdd.naver?blogId=blogpeople";b.submit()}this._hideLayer();a.stop()}});var NaverCommentStyleController=function(){var d=jindo.$Element;var c=jindo.$;var a=jindo.$$;var b=jindo.$Template;this.makeAndPutCustomCss=function(f){var e="commentCustomCss";if(!f&&d(e)){return}var g=this._getCustomCssFromTemplate();this._putCss(g,e)};this._putCss=function(g,e){var f=c(e);if(!g){return}if(!f){f=document.createElement("style");f.id=e;f.type="text/css";document.getElementsByTagName("head")[0].appendChild(f)}if(f.styleSheet){f.styleSheet.cssText=g}else{f.innerHTML=g}};this._initStyle=function(f){var e=d(f);if(!e){return}e.leave()};this._getCustomCssFromTemplate=function(){var g=d(a.getSingle("._naver_comment_skin_property .pcol2"));var h=d(a.getSingle("._naver_comment_skin_property .cline"));var e=d(a.getSingle("._naver_comment_skin_property .pcol3"));var f=d(a.getSingle("._naver_comment_skin_property .comment"));return b("naverCommentCustomCssTpl").process({comment:f.css("backgroundColor"),cline:h.css("borderBottomColor"),pcol2:g.css("color"),pcol3:e.css("color")})}};var NaverCommentController=$Class({$init:function(){this.paginationInfoMap={};this.keepScrollContainerIdMap={};this.disableContainerIdMapForPagingScroll={};this.naverCommentScriptLoaded;this.oUserProfileInfo;this.styleController=new NaverCommentStyleController();this.isSimpleType=false;this.styleController.makeAndPutCustomCss();this.isAutoFocus=false;if(gbIsPostCommentOpen&&paramLogNo){this._autoOpenComment()}},_autoOpenComment:function(){if(!firstPostIsAllOpenPost){firstPostIsAllOpenPost="false"}try{var a={blogNo:blogNo,ticketNo:"201",targetNo:paramLogNo,aFormation:["list","page","write"],isPostComment:true,nPageSize:50,sPageType:"default"};this.open(a)}catch(b){}},open:function(b,c){var a=this._getContainerId(b.ticketNo,b.targetNo);this.keepScrollContainerIdMap[a]=true;this.disableContainerIdMapForPagingScroll[a]=true;this._setAdditionalInfo(b)},_hasProduct:function(b){if(typeof endPageProductMap==="undefined"||!endPageProductMap){return false}var c=endPageProductMap[b];if(typeof c==="undefined"||!c){return false}var a=c.secedeSellerHasProduct;if(typeof a==="undefined"||!a){return false}return a},_setAdditionalInfo:function(c){var b=this;var e=function(f){b.oMentionInfo=f;b._loadNaverCommentModule(c)};var d=function(){b._setMentionInfo(c,e)};var a=function(){b._setUserProfileInfo(c,d)};b._setTemplateId(c,a)},_setTemplateId:function(b,c){var a=this._getObjectId(b);new $Ajax("/NaverCommentTemplateIdAsync.naver",{method:"post",onerror:function(){},onload:function(d){oResult=d.json();b.templateId=oResult.templateId;b.isMentionPossible=(b.templateId.indexOf("_pr")<0);c()}}).request({blogId:blogId,objectId:a})},_successfullyLoadedScript:function(){this.naverCommentScriptLoaded&&cbox&&cbox.Core&&cbox.Core.init},_setUserProfileInfo:function(b,c){if(this.oUserProfileInfo||!isLoggedIn){c();return}var a=this;new $Ajax("/NaverCommentUserInfoAsync.naver",{method:"post",onerror:function(){},onload:function(d){a._onloadUserProfileInfo(d,b);c()}}).request({blogId:blogId,isSimpleType:a.isSimpleType})},_setMentionInfo:function(a,b){if(typeof naverCommentMentionController==="undefined"||!a.isMentionPossible){b();return}naverCommentMentionController(blogId,b)},_onloadUserProfileInfo:function(b,a){oResult=b.json();var d=oResult.profileType;var e=oResult.nickName;var c=oResult.fontName;this.isSimpleType=oResult.isSimpleType;this.oUserProfileInfo={profileType:d,nickname:e};if(d=="profile"){this.oUserProfileInfo.image=oResult.profileImageUrl}else{if(d=="personacon"){this.oUserProfileInfo.images=JSON.parse(oResult.personaconListJson)}}if(c){this.oUserProfileInfo.fontName=c}},_loadNaverCommentModule:function(b){var a=this._makeNaverCommentParam(b);if(this._successfullyLoadedScript()){cbox.Core.init(a);return}this._loadScript(a)},_loadScript:function(b){var a=this;window.__htCboxOption=b;var c=document.createElement("script");c.type="text/javascript";c.charset="utf-8";c.onreadystatechange=function(){if(c.readyState=="complete"||c.readyState=="loaded"){a.naverCommentScriptLoaded=true}};c.onload=function(){a.naverCommentScriptLoaded=true};c.onerror=function(){a.naverCommentScriptLoaded=false};c.src=b.sDomain+"/js/cbox.core.js?v="+Math.floor(new Date().getTime()/1200000);(document.head||document.getElementsByTagName("head")[0]).appendChild(c)},close:function(b,a){$Element(this._getContainerId(b,a)).hide()},_show:function(e,b,d){var a=this._getContainerId(e,b);var c=$Element(a);this._showHeader(c,d);c.show()},_showHeader:function(c,f){var e=c.query(".commentbox_header");var b=c.query(".commentbox_pagination");if(!e||!b||!f.oJson.result.count||!f.oJson.result.pageModel){return}var d=f.oJson.result.count.total;var a=f.oJson.result.pageModel.totalPages;if(d<20){$Element(e).hide()}else{$Element(e).show()}if(a==1){$Element(b).hide()}else{$Element(b).show()}},toggle:function(b,a){this.isSimpleType=a;if(this.isVisible(b.ticketNo,b.targetNo)){this.close(b.ticketNo,b.targetNo)}else{this.open(b)}},isVisible:function(d,c){var a=this._getContainerId(d,c);var b=$Element(a);return b.visible()},_getDivId:function(b,a){return"naverComment_"+b+"_"+a},_getContainerId:function(b,a){return"naverComment_"+b+"_"+a+"_ct"},_getObjectId:function(a){return a.blogNo+"_"+a.ticketNo+"_"+a.targetNo},_loginPopup:function(a){var b=idURLSecret+"/nidlogin.login?template=plogin&mode=form&url="+blogURL+"/ReloadTopAndReturnClose.naver?blogId="+blogId+"%26logNo="+a+"%26isMemolog="+isMemolog;parent.open(b,"LoginForComment","width=205,height=208")},_getTargetScrollTop:function(b,a){if(b){var c=$Element(a).parent().query("._cmtList");return this._absoluteOffsetTop(c)-47}return window.pageYOffset||(document.documentElement||document.body).scrollTop},_getTargetScrollLeft:function(a){if(a){return 0}return window.pageXOffset||(document.documentElement||document.body).scrollLeft},_getUniqueIds:function(c){var d=[];for(var b=0,a=c.length;b<a;b++){var f=c[b];var e=f.profileUserId;if(d.indexOf(e)===-1&&e!==""){d.push(e)}}return d},_getBlockIds:function(a){ids=this._getUniqueIds(a);new $Ajax("/BlockIdCheck.naver",{method:"get",async:false,onload:function(b){oResult=b.json()}}).request({blogId:blogId,checkIds:ids.join(",")});return oResult},_markBlockIdsComment:function(c){if(isLoggedIn!==true||typeof c==="undefined"){return}var b=this._getBlockIds(c);for(var a=0;a<c.length;a++){if(b.indexOf(c[a].profileUserId)>=0){c[a].blogBlock=true}}},_makeNaverCommentParam:function(c){var k=this;var m=k._getDivId(c.ticketNo,c.targetNo);var b=c.commentNoPosition!=null?c.commentNoPosition:"";var l=k._getObjectId(c);var e=k._getContainerId(c.ticketNo,c.targetNo);var h=c.bIsAutoFocus;var g=k._getTargetScrollTop(h,e);var a=k._getTargetScrollLeft(h);var j="utf-8";var f=k._hasProduct(c.targetNo);var d='댓글을 작성하려면 <a href="#" class="u_cbox_link">로그인</a> 해주세요';if(gbIsNotOpenBlogUser){d="블로그가 더 훈훈해지는 댓글 부탁드립니다.";isLoggedIn=false}return{sId:m,sDomain:naverCommentStaticURL,sApiDomain:naverCommentApiProxyURL,bLogin:isLoggedIn,sTicket:"blog",sObjectId:l,sLanguage:"ko",sGroupId:c.blogNo,sCommentNo:b,sLikeItId:c.sLikeItId,bManager:blogOwner,aFormation:c.aFormation,sCharset:j,sDateFormat:"Y.n.j. H:i",bUseAgo:false,bShowReply:true,sTemplateId:c.templateId,nPageSize:c.nPageSize,sCssId:"blog",sProfileActionType:"NEW_WINDOW",bStickerPositionUp:false,bAdjustStickerSize:true,fLoginHandler:function(n){if(gbIsNotOpenBlogUser){k._showDomainRegisterLayer("댓글을 남기거나 신고하려면 블로그 아이디가 필요해요.","bsu*l.comment");return}if(!c.isPostComment){loginObj.popUpLogin("parent replace");return}k._loginPopup(c.targetNo)},fCommentItemHandler:function(o){if(o.blogBlock==true){o.contents="차단된 사용자의 댓글입니다.";o.className="blog_type_userblock";return}if(o&&o.userProfileImage){var n=o.userProfileImage;if(typeof itemFactoryDomainDisabled!=="undefined"&&itemFactoryDomainDisabled){if(n.indexOf("itemimgs.pstatic.net")>0){n=n.replace("itemimgs.pstatic.net","blogimgs.pstatic.net/item")}if(n.indexOf("itemsimgs.naver.net")>0){n=n.replace("itemsimgs.naver.net","blogimgs.pstatic.net/itemf")}if(n.indexOf("itemsimgs.naver.com")>0){n=n.replace("itemsimgs.naver.com","blogimgs.pstatic.net/itemf")}}if(n.indexOf("?")>0){n=n.substring(0,n.indexOf("?"))}o.userProfileImage=n+"?type=s40"}if(!o.extension){return}o.className="_eot_font _font-name_"+o.extension},vProfileHandler:function(n){if(n.id){return mylogURL+"/"+n.id}else{if(n.userHomepageUrl){return n.userHomepageUrl}}},htMessage:{template:{list_empty:"댓글이 없습니다.<br>첫번째 댓글을 남겨주세요.",write_reply_placeholder:"답글을 입력해주세요.",write_long_placeholder:function(n){if(n.mention){return"블로그가 더 훈훈해지는 댓글 부탁드립니다. @별명을 입력하면 서로이웃이 소환됩니다."}else{return"블로그가 더 훈훈해지는 댓글 부탁드립니다. 불쾌감을 주는 욕설과 악플은 삭제될 수 있습니다."}},write_needs_login:{pc:{"default":d}},secret_reply:"비밀 댓글입니다.",editor:"블로그주인",mention:"소환"},alert:{mention_edit_confirm:"댓글 수정시 @소환이 해제됩니다. 계속 진행하시겠습니까?\n(소환기능은 Internet Explorer 9.0, Android 4.0 이상의 환경에서, 전체공개글 일때 가능합니다)",secret_mention_confirm:"댓글 내용 중 @소환이 있는경우,\n비밀로 등록할 수 없습니다.\n일반 댓글로 등록하시겠습니까?",not_support_upload_image:"IE 9 이하 브라우저에서는\n이미지 댓글을 업로드 할 수 없습니다.",exceed_comment:"IE 9 이하 브라우저에서는\n댓글 길이 300자(한글 기준)를 초과할 수 없습니다."}},htErrorHandler:{"3200":"블로그 주인이 설정한 스팸 차단에 의해 댓글이 등록되지 않습니다."},htEventHandler:{beforeCreate:function(n){var o=k.oUserProfileInfo;var p=o?o.fontName:null;if(p){var q=n.htParams;q.extension=p}if(f){n.htParams.secret=true}mylogBaEventSender.comment(baUrl,baUserKey,paramLogNo)},beforeEdit:function(n){if(f){n.secret=true}},afterEdit:function(n){k._displayHasProduct(e,f)},afterList:function(n){k._displayHasProduct(e,f);k._initPagination(m,e);k._focusToCommentTop(k,m,e);if(gbIsNotOpenBlogUser){$Fn(function(o){k._showDomainRegisterLayer("공감을 남기려면 블로그 아이디가 필요해요.","bsu*l.like");o.stopBubble();o._event.preventDefault();return false}).attach($Element(document.body).queryAll(".u_cbox_btn_recomm"),"click")}},afterReplyList:function(n){k._displayHasProduct(e,f)},loadList:function(n){k._markBlockIdsComment(n.oJson.result.commentList);k._displayHasProduct(e,f);k._show(c.ticketNo,c.targetNo,n)},loadCreate:function(n){k._markBlockIdsComment(n.oJson.result.commentList)},afterCreate:function(n){k._displayHasProduct(e,f);k._show(c.ticketNo,c.targetNo,n);k._initPagination(m,e);var o=$("commentCount").innerHTML;if(o==0){$("comment_zero_label").innerHTML="";$("commentCount").innerHTML=1;if($("floating_bottom_comment_label")!=undefined){$("floating_bottom_comment_label").innerHTML="댓글";$("floating_bottom_commentCount").innerHTML=1}}else{if($("commentCount").innerHTML.indexOf("+")>0){return}$("commentCount").innerHTML=+o+1;if($("floating_bottom_commentCount")!=undefined){$("floating_bottom_commentCount").innerHTML=+o+1}}},loadRemove:function(n){k._markBlockIdsComment(n.oJson.result.commentList)},afterRemove:function(n){k._displayHasProduct(e,f);k._show(c.ticketNo,c.targetNo,n);k._initPagination(m,e);var o=$("commentCount").innerHTML;if(o==1){$("comment_zero_label").innerHTML="쓰기";$("commentCount").innerHTML="";if($("floating_bottom_comment_label")!=undefined&&$("floating_bottom_commentCount")!=undefined){$("floating_bottom_comment_label").innerHTML="첫 댓글을 남겨보세요";$("floating_bottom_commentCount").innerHTML=""}}else{if($("commentCount").innerHTML.indexOf("+")>0){return}$("commentCount").innerHTML=+o-1;if($("floating_bottom_commentCount")!=undefined){$("floating_bottom_commentCount").innerHTML=+o-1}}},initialized:function(){k._displayHasProduct(e,f);if(b){return}window.scrollTo(a,g)},afterImageLoadFinished:function(){k._displayHasProduct(e,f);if(!k.keepScrollContainerIdMap[e]||b){return}window.scrollTo(a,g);k.keepScrollContainerIdMap[e]=false},loadReport:function(n){if(!n||!n.oJson||!n.oJson.success){return}if(n.oJson.result.reportUrl.indexOf("srp.naver.com")<0){return}var o=function(q){var s=q.reportUrl;s+="?itemType="+encodeURIComponent(q.itemType);s+="&reportCountryCd="+encodeURIComponent(q.reportCountryCd);s+="&itemTitle="+encodeURIComponent(q.itemTitle);s+="&itemWriterNick="+encodeURIComponent(q.itemWriterId);s+="&itemWriterId="+encodeURIComponent(q.itemWriterId);s+="&cwriter="+encodeURIComponent(q.cwriter);s+="&ctitle="+encodeURIComponent(q.ctitle);s+="&memtype="+encodeURIComponent(q.memtype);s+="&rlang="+encodeURIComponent(q.rlang);s+="&vsvc="+encodeURIComponent(q.vsvc);s+="&svc="+encodeURIComponent(q.svc);s+="&cwriterenc="+encodeURIComponent(q.cwriterenc);s+="&env="+encodeURIComponent(q.env);s+="&itemId="+encodeURIComponent(q.itemId);s+="&itemEncyptWriterId="+encodeURIComponent(q.itemEncyptWriterId);s+="&reportLangCd="+encodeURIComponent(q.reportLangCd);s+="&ctype="+encodeURIComponent(q.ctype);s+="&itemSvcCd="+encodeURIComponent(q.itemSvcCd);s+="&rcountry="+encodeURIComponent(q.rcountry);s+="&memberType="+encodeURIComponent(q.memberType);s+="&itemDt="+encodeURIComponent(q.itemDt);s+="&itemVirtualSvcCd="+encodeURIComponent(q.itemVirtualSvcCd);s+="&cid="+encodeURIComponent(q.cid);for(var p=0;p<q.category.length;p++){var r=q.category[p];s+="&itemCateId="+encodeURIComponent(r.itemCateId);s+="&itemCateName="+encodeURIComponent(r.itemCateName);s+="&itemCateLevel="+encodeURIComponent(r.itemCateLevel)}s+="&m=rprtFrm";return s};window.open(o(n.oJson.result),"commentCommonReport","width=580,height=800,status=no,scrollbars=yes,left=0,top=0");n.stop()}},htUserInfo:k.oUserProfileInfo,htMentionOption:k.oMentionInfo}},_showDomainRegisterLayer:function(c,b){var a={wrapperDivId:"domainRegisterWrap",title:c,confirmBtnValue:"아이디 만들기",win:window,isLightVersion:true,clickCodePrefix:b,initialCode:b,callbackFn:function(){location.reload()},apiUrl:{recommendDomainListUrl:"/blogdomain/RecommendBlogDomainList.naver",duplicateCheckUrl:"/blogdomain/BlogDomainDuplicateCheck.naver",blogDomainRegisterUrl:"/blogdomain/BlogDomainRegistration.naver"}};blogDomainRegisterLayer.init(a);blogDomainRegisterLayer.show()},_displayHasProduct:function(b,c){var a=this;if(!c){return}a._forceDisplaySecretTagHidden(b);a._addEditBtnEvent(b);a._addReplyBtnEvent(b)},_addReplyBtnEvent:function(b){var a=this;if(!b){return}var d=$Element(b).queryAll(".u_cbox_btn_reply");if(!d){return}for(var c in d){$Fn.freeElement(d[c]);$Fn(function(){setTimeout(function(){a._forceDisplaySecretTagHidden(b)},0)},a).attach(d[c],"click")}},_addEditBtnEvent:function(b){var a=this;if(!b){return}var d=$Element(b).queryAll(".u_cbox_btn_edit");if(!d){return}for(var c in d){$Fn.freeElement(d[c]);$Fn(function(){setTimeout(function(){a._forceDisplaySecretTagHidden(b)},0)},a).attach(d[c],"click")}},_forceDisplaySecretTagHidden:function(b){var a=this;if(!b){return}var e=$Element(b).queryAll(".u_cbox_secret_tag");if(!e){return}for(var c in e){var d=e[c];$Element(d).css("display","none")}},_focusToCommentTop:function(a,c,b){if(a.disableContainerIdMapForPagingScroll[b]){a.disableContainerIdMapForPagingScroll[b]=false;return}var d=$Element(b).parent().query("._cmtList");window.scrollTo(0,a._absoluteOffsetTop(d))},_absoluteOffsetTop:function(a){if(!a){return 0}var b=0;do{b+=a.offsetTop||0;a=a.offsetParent}while(a);return b},_initPagination:function(b,a){if(!$Element(a).query("._naverCommentHeader")){return}if(!cbox.Interface.pagination){return}var c=cbox.Interface.pagination(b);this._setPageInfo(a,c);if(this.paginationInfoMap[a]){this.paginationInfoMap[a]=c;return false}this._addPaginationEvent(c,a);this.paginationInfoMap[a]=c},_setPageInfo:function(a,c){if(!c){c=this.paginationInfoMap[a]}var b=$Element(a).query(".commentbox_pagination");if(!b||!$Element(b).visible()){return}var d=c.currentPage();var e=c.totalPage();$Element(a).query("._currentPageNo").innerHTML=d;$Element(a).query("._lastPageNo").innerHTML=e;if(d==1){this._disablePageNavigator($Element(a).query("._naverCommentPrev"))}else{this._enablePageNavigator($Element(a).query("._naverCommentPrev"))}if(d==e){this._disablePageNavigator($Element(a).query("._naverCommentNext"))}else{this._enablePageNavigator($Element(a).query("._naverCommentNext"))}},_addPaginationEvent:function(e,c){var a=this;var f=$Element(c).query("._naverCommentWriteBtn");var d=$Element(c).query("._naverCommentPrev");var b=$Element(c).query("._naverCommentNext");if(!f&&!d&&!b){return}if(f){$Fn(a._doClick,this).attach(f,"click",true)}if(d){$Fn(a._doClick,this).attach(d,"click",false)}if(b){$Fn(a._doClick,this).attach(b,"click")}},_doClick:function(b){var c=b.element;var a=$Element(cssquery.getSingle("!a",c)?cssquery.getSingle("!a",c):c);var d=paramUtil.getParam(a&&a.className()!=""?a.className():c.className);if(a.hasClass("_naverCommentWriteBtn")){this._goWrite(d[0],d[1],b)}else{if(a.hasClass("_naverCommentPrev")){this._prevPage(d[0])}else{if(a.hasClass("_naverCommentNext")){this._nextPage(d[0])}}}},_goWrite:function(b,a,c){this.keepScrollContainerIdMap[a]=false;this.disableContainerIdMapForPagingScroll[a]=false;var e=$(b+"__write_textarea");if(!e){return}e.focus();var d=this._findWriteEl(b,e);this._scrollToCenter(d);c.stop()},_findWriteEl:function(b,d){var c=$A($Element(b).queryAll(".u_cbox_write_wrap"));if(!c||c.length()<1){return}var a;c.forEach(function(f){var e=$Element(f);if(e&&e.isParentOf($(d))){a=f}});return a},_scrollToCenter:function(d){var b=this._absoluteOffsetTop(d);var c=parseInt((window.innerHeight||document.documentElement.clientHeight)/2);var a=parseInt(d.offsetHeight/2);if(b&&c&&a){window.scrollTo(0,b-c+a)}},_prevPage:function(a){this.disableContainerIdMapForPagingScroll[a]=true;var b=this.paginationInfoMap[a];this._setPageInfo(a,b);if(b.currentPage()==1){return}b.prev()},_nextPage:function(a){this.disableContainerIdMapForPagingScroll[a]=true;var b=this.paginationInfoMap[a];this._setPageInfo(a,b);if(b.currentPage()==b.totalPage()){return}b.next()},_disablePageNavigator:function(a){if(!a){return}$Element(a).addClass("dimmed")},_enablePageNavigator:function(a){if(!a){return}$Element(a).removeClass("dimmed")}});var naverCommentController=new NaverCommentController();function NaverCommentMentionController(){var a=this;a.cachedMentionInfoList;a.loadMentionInfoList=function(b,c){new $Ajax("/NaverCommentMentionInfoListAsync.naver",{method:"post",onload:function(d){if(d&&d._response){if(c){var f=d.json();var e={getter:function(h,g){g(f)},message:{guide:"@블로그별명 입력 시, 서로이웃이 소환됩니다.",empty:"서로이웃을 소환할 수 있습니다."},useMentionButton:true,buttonGuide:{message:"이제 PC 전체공개글에서도 나의 서로이웃을 소환해 보세요.",expire:365}};a.cachedMentionInfoList=e;c(e)}}}}).request({blogId:b})};return function(c,d){var b=a.cachedMentionInfoList;if(b){if(d){d(b)}return}a.loadMentionInfoList(c,d)}}var naverCommentMentionController=new NaverCommentMentionController();var VideoPlayerController=$Class({$init:function(){this.videoPlayerUrl=videoPlayerUrl;this.advertiseInfoUrl=advertiseInfoUrl;this.isDevPhase=isDevPhase==="true";this.isStagePhase=isStagePhase==="true";this.isNotHasSe3AndSeOne=isNotHasSe3AndSeOne;this.isScrap=isScrap;this.isPlayerLoaded=false;this.videoInfraSid=this.isDevPhase==="true"?20002:2;var a=document.getElementsByClassName("original_post_area_se2");this.isSe2SourceScrap=a.length>0&&this.isScrap;if(this.isNotHasSe3AndSeOne||this.isSe2SourceScrap){this.load()}this.playerObjectList=[]},load:function(a){var b=this;if(b.isPlayerLoaded&&!a){return}if(b._isActiveEnabledElement()){b._loadElement(a);return}b._loadScript(a);b.isPlayerLoaded=true},_loadScript:function(a,d){var b=this;var c=document.createElement("script");c.type="text/javascript";c.charset="utf-8";c.onreadystatechange=function(){if(c.readyState==="complete"||c.readyState==="loaded"){b._loadElement(a)}};c.onload=function(){b._loadElement(a);if(d){d()}b.isPlayerLoaded=true};c.onerror=function(){};c.src=b.videoPlayerUrl;(document.head||document.getElementsByTagName("head")[0]).appendChild(c)},_isActiveEnabledElement:function(){return typeof naver!=="undefined"&&naver.player&&typeof naver.player.PrismPCPlayer!=="undefined"},_loadElement:function(g){var s=this;var e=[];if(!s._isActiveEnabledElement()){return}var c;if(typeof g!=="undefined"&&g){var b=document.getElementById(g);if(b){c=b.getElementsByClassName("_vnl")}}else{c=document.getElementsByClassName("_vnl")}if(!c||c.length===0){return}for(var m=0;m<c.length;m++){var j=c[m];var p=j.getAttribute("vid");var h=j.getAttribute("key");var d=j.getAttribute("logno");var f=j.getAttribute("domain-or-blogid");var n=document.createElement("div");n.setAttribute("slot","viewmode-button");j.append(n);var l=naver.player.PrismPCPlayer.upgrade(j);if(!l){continue}e.push({vid:p,player:l});var k=location.origin+"/"+f+"/"+d;var r=l.querySelector("pzp-pc-content-title");l.addEventListener("loadedmetadata",function(){if(typeof searchVid!=="undefined"&&searchVid!==""&&focusing){focusing.gotoTagForPost()}var u={evKey:"blog",serviceName:"블로그",url:k,sourceName:blogNicknameOrBlogId,darkMode:false};if(r){u.title=r.getAttribute("refinedTitle")}var w=this.querySelector(".pzp-pc__social-plugin-container");if(w){var t=w.getAttribute("id");var v=document.querySelectorAll(".pzp-pc-share-button.naver-splugin");v.forEach(function(x){if(x.getAttribute("data-player-target-id")===t){if(window.__splugin&&!g){window.__splugin.update(x,u)}else{window.__splugin=SocialPlugIn_Core();window.__splugin.update(x,u)}}})}}.bind(l));var q=document.getElementsByClassName("pzp-custom__add-subtitle");Array.from(q).forEach(function(t){t.style.visibility="visible"});if(r){r.target="_blank"}var o=l.querySelector(".pzp-custom__add-subtitle");if(o){o.addEventListener("click",function(y){y.stopImmediatePropagation();var t=window.location.protocol+"//serviceapi.nmv.naver.com/meta/caption/caption.nhn?&vid="+p;var x=430;var z=400;var w=(window.innerWidth-x)/2;var v=(window.innerHeight-z)/2;var u=window.open(t,"자막 업로드","toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=auto, width="+430+", height="+400+", top="+v+", left="+w);u.focus();l.commands.execute(naver.player.SettingCommands.Close)})}var a="real";if(s.isDevPhase){a="dev"}else{if(s.isStagePhase){a="stage"}else{a="real"}}l.src="vod://"+s.videoInfraSid+":"+h+"@"+p+"?providerEnv="+a+"#track=720p";if(typeof g!=="undefined"&&g){s.playerObjectList.push({vid:p,player:l})}}s._initAdvertise(e)},resetPlayer:function(a){var b=this;var d=b._getVidList(a);for(var c=0;c<d.length;c++){b._playerPause(d[c])}},_playerPause:function(a){var e=this;if(typeof a==="undefined"||!a){return}for(var d=0;d<e.playerObjectList.length;d++){var b=e.playerObjectList[d];if(b.vid===a){var c=b.player;if(c&&c.currentTime>0){c.pause()}}}},_getVidList:function(b){var e=[];var c;if(typeof b!=="undefined"&&b){var a=document.getElementById(b);if(a){c=a.getElementsByClassName("_vnl")}}if(!c){return e}for(var d=0;d<c.length;d++){e.push(c[d].getAttribute("vid"))}return e},_bindAdvertiseToVideo:function(b){var c=this;if(!Array.isArray(b)){return}for(var a=0;a<b.length;a++){var d=b[a];jQuery.ajax({url:c.advertiseInfoUrl+"/api/open/ugc/advertise/adInfo.xml?videoId="+d.vid+"&adType=PC",dataType:"xml",success:function(h){var l=jQuery(h).find("AdvertiseUrl").text();var f=decodeURIComponent(l.replace("glad://load?params=",""));var k=null;try{k=JSON.parse(f)}catch(j){}if(k&&k.scheduleParam&&k.scheduleParam.adSchedulePolicy){var g=new naver.player.GLADRequest();g.setVideoScheduleInfo({videoAdScheduleId:k.scheduleParam.adScheduleId,isMobile:false});g.setAdSchedulePolicy({pre:k.scheduleParam.adSchedulePolicy.pre,mid:k.scheduleParam.adSchedulePolicy.mid,post:k.scheduleParam.adSchedulePolicy.post,});d.player.adsController.srcObject=g}}})}},_initAdvertise:function(a){var b=this;if(naver&&naver.player&&naver.player.GLADRequest){b._bindAdvertiseToVideo(a)}else{b._loadScript(null,function(){b._bindAdvertiseToVideo(a)})}}});var videoPlayerController=new VideoPlayerController();var ProductController=$Class({_blogId:"",_loginUserId:"",_loggedIn:false,_hasProduct:false,_endPageProductMap:{},_env:"dev",_platform:"pc",_marketScriptLoaded:false,_marketMap:{},_showCoupon:false,_pcUrl:"",$init:function(f,d,b,c,g,e,h,a){this._blogId=f;this._loginUserId=d;this._loggedIn=b;this._hasProduct=c;this._endPageProductMap=g;this._env=e;this._showCoupon=h;this._pcUrl=a;if(!this._isValid()){return}this._loadScript();this._initMarketLayer();$Fn(this._onClickBuyBtn,this).attach($$("._marketBuyBtn"),"click");$Fn(this._onClickCouponBtn,this).attach($$("._marketCouponBtn"),"click");$Fn(this._onClickProductNoticeExpand,this).attach($$("._noticeProductExpandBtn"),"click");$Fn(this._onClickDeliveryExpand,this).attach($$("._deliveryExpandedBtn"),"click");$Fn(this._onClickProductNoticeDisplayNone,this).attach($$("#head-skin"),"click");$Fn(this._onClickDeliveryDisplayNone,this).attach($$("#head-skin"),"click");$Fn(function(j){j.stop()},this).attach($$(".notification_table, .more_info, .deliver_contents_expand"),"click")},_successfullyLoadedScript:function(){return this._marketScriptLoaded&&naverBlog},_loadScript:function(){var a=this;var b=document.createElement("script");b.type="text/javascript";b.charset="utf-8";b.onreadystatechange=function(){if(b.readyState==="complete"||b.readyState==="loaded"){a._marketScriptLoaded=true}};b.onload=function(){a._marketScriptLoaded=true;a._initMarketLayer()};b.onerror=function(){a._marketScriptLoaded=false};b.src=this._getBlogModuleSrc();(document.head||document.getElementsByTagName("head")[0]).appendChild(b)},_onClickBuyBtn:function(c){var e=c.element;var b=$Element(cssquery.getSingle("!a",e)?cssquery.getSingle("!a",e):e);var g=paramUtil.getParam(b&&b.className()!=""?b.className():e.className);if(b.hasClass("_marketBuyBtn")){var d=((g==null||g[0]==null)?"":g[0]);var a=((g==null||g[1]==null)?"":g[1]);if(this._marketMap===null||this._marketMap===undefined){return}var f=jindo.$Agent().navigator();if(f.ie){if(confirm("이 브라우저는 현재 블로그 마켓 구매하기를 지원하지 않습니다.\n 네이버 웨일 등 다른 브라우저를 이용하시기 바랍니다.\n 지금 네이버 웨일을 설치하시겠습니까?")){window.open("https://whale.naver.com/ko/download","_blank")}return}if(this._marketMap[a]===null||this._marketMap[a]===undefined){return}this._marketMap[a].buyLayer.show({productId:d})}if(b.hasClass("_returnFalse")){c.stop()}},_onClickCouponBtn:function(c){var e=c.element;var b=$Element(cssquery.getSingle("!a",e)?cssquery.getSingle("!a",e):e);var g=paramUtil.getParam(b&&b.className()!=""?b.className():e.className);if(b.hasClass("_marketCouponBtn")){var d=((g==null||g[0]==null)?"":g[0]);var a=((g==null||g[1]==null)?"":g[1]);if(this._marketMap===null||this._marketMap===undefined){return}var f=jindo.$Agent().navigator();if(f.ie){if(confirm("이 브라우저는 현재 블로그 마켓 구매하기를 지원하지 않습니다.\n 네이버 웨일 등 다른 브라우저를 이용하시기 바랍니다.\n 지금 네이버 웨일을 설치하시겠습니까?")){window.open("https://whale.naver.com/ko/download","_blank")}return}if(this._loggedIn===false){var h=this._pcUrl+"/PostView.nhn?blogId="+this._blogId+"&logNo="+a+"&rproductId="+d+"&showCoupon=true";top.location.href="https://nid.naver.com/nidlogin.login?mode=form&&url="+encodeURIComponent(h);return}if(this._marketMap[a]===null||this._marketMap[a]===undefined){return}this._marketMap[a].couponLayer.show({productId:d})}if(b.hasClass("_returnFalse")){c.stop()}},showCouponLayer:function(a,b){if(this._marketMap[a]==="undefined"||this._marketMap[a]===null){return}if(typeof this._showCoupon==="undefined"||this._showCoupon===null||this._showCoupon===false){return}this._marketMap[a].couponLayer.show({productId:b})},_onClickDeliveryExpand:function(c){var e=c.element;var b=$Element(cssquery.getSingle("!a",e)?cssquery.getSingle("!a",e):e);var g=paramUtil.getParam(b&&b.className()!=""?b.className():e.className);if(b.hasClass("_deliveryExpandedBtn")){var a=((g==null||g[0]==null)?"":g[0]);var f="deliveryWrap_"+a;var d=$Element(f);if(d===null||d===undefined){return}if(d.hasClass("expanded")){nclk_v2(this,"pst.deliveryinfoclose","","");d.removeClass("expanded")}else{nclk_v2(this,"pst.deliveryinfoopen","","");d.addClass("expanded")}}if(b.hasClass("_returnFalse")){c.stop()}},_onClickDeliveryDisplayNone:function(){var a=$$(".wrap_deliver");if(a===null){return}var c=$Element(cssquery.getSingle("button",a[0]));var f=paramUtil.getParam(c&&c.className()!=""?c.className():a.className);if(c.hasClass("_deliveryExpandedBtn")){var b=((f==null||f[0]==null)?"":f[0]);var e="deliveryWrap_"+b;var d=$Element(e);if(d===null||d===undefined){return}if(d.hasClass("expanded")){d.removeClass("expanded")}}},_onClickProductNoticeExpand:function(j){var d=j.element;var a=$Element(cssquery.getSingle("!a",d)?cssquery.getSingle("!a",d):d);var g=paramUtil.getParam(a&&a.className()!=""?a.className():d.className);if(a.hasClass("_noticeProductExpandBtn")){var e=((g==null||g[0]==null)?"":g[0]);var c=((g==null||g[1]==null)?"":g[1]);var k="notificationInfo_"+c+"_"+e;var h=$Element(k);if(h===null||h===undefined){return}var f="notificationExpandedTable_"+c+"_"+e;var b=$Element(f);if(b===null||b===undefined){return}if(h.hasClass("expanded")){nclk_v2(this,"pst.iteminfoclose","","");h.removeClass("expanded");b.css("display","none")}else{nclk_v2(this,"pst.iteminfoopen","","");h.addClass("expanded");b.css("display","block")}}if(a.hasClass("_returnFalse")){j.stop()}},_onClickProductNoticeDisplayNone:function(){var a=$$(".notification_info");if(a===null){return}for(var b=0;b<a.length;b++){this._hideProductNotice(a[b])}},_hideProductNotice:function(d){var a=$Element(cssquery.getSingle("button",d));var g=paramUtil.getParam(a&&a.className()!=""?a.className():d.className);if(a.hasClass("_noticeProductExpandBtn")){var e=((g==null||g[0]==null)?"":g[0]);var c=((g==null||g[1]==null)?"":g[1]);var j="notificationInfo_"+c+"_"+e;var h=$Element(j);if(h===null||h===undefined){return}var f="notificationExpandedTable_"+c+"_"+e;var b=$Element(f);if(b===null||b===undefined){return}if(h.hasClass("expanded")){h.removeClass("expanded");b.css("display","none")}}},_getBlogModuleSrc:function(){return blogModuleJs},_isDevPhase:function(){return typeof this._env!=="undefined"&&this._env==="dev"},_isValid:function(){if(this._hasProduct===undefined){return false}return this._hasProduct},_initMarketLayer:function(){var a=this;if(!a._successfullyLoadedScript()){return}for(var b in a._endPageProductMap){if(a._endPageProductMap.hasOwnProperty(b)&&(a._endPageProductMap[b]&&a._endPageProductMap[b].hasProduct)){var c=document.getElementById("product-layer");var d=document.getElementById("product_contents_header_"+b);if(!c||!d){return}var e=new naverBlog.Market({blogId:a._blogId,loginUserId:a._loginUserId,logNo:b,sellerNo:a._endPageProductMap[b].sellerNo,env:a._env,buyLayerHolder:c,platform:a._platform});e.updateStatus(d);a._marketMap[b]=e;(function(f){e.on("marketstatuschaged",function(k){var g=k.status;var j="#post-view"+f;var h=$$(j+" .btn_buy");if(!h){return}h.map(function(m){var o=paramUtil.getParam(m.className);var n=((o==null||o[2]==null)?"":o[2]);var l=n==="false";switch(g){case"sale_ended":m.setAttribute("disabled","disabled");m.textContent="판매종료";break;case"sale_out_of_stock":m.setAttribute("disabled","disabled");m.textContent="재고소진";break;case"sale_before":m.setAttribute("disabled","disabled");m.textContent="판매예정";break;case"sale_no_deadline":case"sale_period":if(l){m.setAttribute("disabled","disabled");m.textContent="재고소진";break}m.removeAttribute("disabled");m.textContent="구매하기"}})})})(b)}}}});var productController=new ProductController(blogId,userId,bLoginUser,hasProduct,endPageProductMap,feEnv,showCoupon,gPcUrl);var BlogMarketWelcomeController=function(){this.localStorage=new LocalStorage("blog.market.welcome",10);this.show=function(){var a=localStorage.getItem("isNewblogMarket");if(a===null){this.showWelcomeLayer();localStorage.setItem("isNewblogMarket",false)}},this.showWelcomeLayer=function(){$Element("marketWelcomeLayerTemp").show()};this.hideWelcomeLayer=function(){$Element("marketWelcomeLayerTemp").hide()};this.goDeliveryFeeSetPage=function(a){if(($Agent().navigator().safari||$Agent().navigator().ie&&$Agent().navigator().nativeVersion<11)){if(confirm("이 브라우저는 현재 블로그 마켓 관리를 지원하지 않습니다.\n 네이버 웨일 등 다른 브라우저를 이용하시기 바랍니다.\n 지금 네이버 웨일을 설치하시겠습니까?")){window.open("https://whale.naver.com/ko/download")}return}window.parent.location.href=a+"/market/deliveryFee"}};var blogMarketWelcomeController=new BlogMarketWelcomeController();var BlogMarketSecedeController=function(){this.showSecedeLayer=function(){var a=$Element("blogMarketSecedeLayer");a.show();nclk_v2(a,"mktleave","","")};this.hideSecedeLayer=function(){var a=$Element("blogMarketSecedeLayer");a.hide();nclk_v2(a,"mktleaveok","","")}};var blogMarketSecedeController=new BlogMarketSecedeController();if(typeof postCommon=="undefined"){var postCommon={}}var tagKeywordRegex=/((_*)[_\d\u0041-\u005A\u0061-\u007A\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC\u0023]+)/g;postCommon.Tag=$Class({$init:function(){this.restrictedTagChars=tagNameValidator.restrictedTagChars;this.tagData=null;this.currentTarget=null;this.isAlreadySubmit=false},isTagname:function(a){return tagNameValidator.isTagname(a)},validateTagString:function(b){var a=b.replace(this.restrictedTagChars,"");re=/[\x2c]+/g;return a.replace(re,",")},absoluteTagString:function(b,g){var f=this.validateTagString(b);var e=f.split(",");var d="";var a=e.length;if(a>g){a=g}for(var c=0;c<a;c++){d=d+e[c]+","}d=this.validateTagString(d);d=d.substring(0,d.length-1);return d},check_tagsvalidate:function(a,b,k){var e=$$.getSingle("~ div",b);var g=$$.getSingle("input",e);g.value=this.validateTagString(g.value);g.value=this.eliminateDuplicate(g.value);var m=g.value.split(",");var f=m.length;if(k){k.call()}if(f.length==1&&f[0].length==0){g.focus();alert("태그를 입력해주세요");return false}if(f>30){alert("태그는 최대 30개 까지 입력이 가능합니다.");g.value=this.absoluteTagString(g.value,30);g.focus();return false}var l;var d=100;l=this.isValidateTagLength(g.value,d);if(!l){alert("태그는 100자 이상 입력할 수 없습니다.");g.focus();return false}for(var c=0;c<f;c++){var j=m[c].replace(/\s+/g,"");if(j===null||j===""){continue}var h=j.match(tagKeywordRegex);if(!h||h[0]!==j){alert("특수문자는 태그로 등록할 수 없습니다.");g.focus();return false}}return true},check_tagvalidate:function(a,c){var b=a.value;if(b.match(this.restrictedTagChars)!=null){b=b.replace(this.restrictedTagChars,"");a.value=b}var d=/[\x2c][\x2c]+/g;if(b.match(d)!=null){b=b.replace(d,",");a.value=b}if(c){c.call()}},eliminateDuplicate:function(b){var f=this.validateTagString(b);var e=f.split(",");var d="";for(var c=0;c<e.length;c++){for(var a=0;a<c;a++){if(e[a]==e[c]){e[c]=""}}d=d+e[c]+","}d=this.validateTagString(d);d=d.substring(0,d.length-1);return d},isValidateTagLength:function(a,c){var d=a.split(",");for(var b=0;b<d.length;b++){if(d[b].length>c){return false}}return true},getLogNoFromTagQuery:function(e){var c=[];if(!e){return c}var d=e.split("&");for(var b=0,a=d.length;b<a;b++){if(!d[b]){continue}c.push(d[b].replace(/logNo=/,""))}return c},loadTagInfo:function(a,e){var c=e||tagParam;var d=this.getLogNoFromTagQuery(c);var b="/BlogTagListInfo.naver";new $Ajax(b,{method:"get",onerror:function(){},onload:$Fn(function(g){if(a!="popup"){this.tagData=[]}if(typeof g!="undefined"){try{var n=g.json();if(!n){return}n=n.taglist;if(a=="popup"){this.callbackSaveTagInfo(n);return}this.tagData=n;if(a=="list"){if(n.length>0){for(i=0;i<n.length;i++){this.setTagList(n[i].logno,n[i].tagName,(n.length-1==i)?"resize":null,$("tagTopName_"+n[i].logno))}}}else{if(n.length>0){if(isMemolog){for(i=0;i<n.length;i++){this.setTagList(n[i].logno,n[i].tagName,(n.length-1==i)?"resize":null,$("tagTopName_"+n[i].logno))}}for(i=0;i<n.length;i++){if($("tagList_"+n[i].logno)!=null){$("tagList_"+n[i].logno).style.display=""}this.setTagList(n[i].logno,n[i].tagName,(n.length-1==i)?"resize":null,$("tagList_"+n[i].logno))}}}var k=new SspAdPostCallerForPC(beyondAnalyticsUrl,baUserKey,blogNo,d[0],gbTrackingCode);var m=false;if(gAdPostUnitIdForPC){m=typeof SspAdContentCallerForPC!=="undefined";if(!powerLinkABATestJson.bucketTestId){k.renderAdPostDiv(n,"ssp-adpost",m,adContentLocation)}else{var j=new SspAdPostCallerForPCOnABTest(powerLinkABATestJson,beyondAnalyticsUrl,baUserKey,blogNo,d[0],gbTrackingCode);j.renderAdPostDiv(n,"ssp-adpost",m,adContentLocation)}}else{if(gNotAdPostUnitIdForPC&&gbIsOnNotAdPostAd){k.renderNotAdPostDiv(n,"ssp-adpost")}}var f=null;if(SspAdContentCallerForPC){f=new SspAdContentCallerForPC();f.renderAdContent(n,adContentLocation)}}catch(h){var l=$$("div.post-tag[@display=block]");nCount=l.length;for(i=0;i<nCount;i++){$Element(l[i]).hide()}}}},this).bind()}).request({blogId:blogId,logNoList:d.join("|"),logType:(isMemolog?"memolog":"mylog")})},loadTagListTableInfo:function(a){this.loadTagInfo("list",a)},setTagList:function(a,g,d,b,f){var e=$Element(b);if(!e){return}var j=utility.decodeURIComponentForJava(g).split(",");var c=f==undefined||f=="undefined"?g.split("%2C"):f.split("%2C");var h=['<strong class="blind">태그</strong>'];h.push(this.makeTagHTMLForPost(a,e,j,c));e.html(h.join(""))},makeTagHTMLForMemologTop:function(b,e,c,a){var f='&nbsp;<a href="#" class="_showTagEditBox _rosRestrict _tagRosRestrict _param(EDIT|'+b+'|TOP) _returnFalse" ><img src="'+imageURL+'/nblog/btn_edit_2.gif" width="23" height="11" alt="edit"/></a>';var d=this.getTagContentsForMemolog(c,a);if(!d||d.length===0){return f}if(blogOwner||this.isPostUpdatable(e)){d.push(f)}return d.join("")},makeTagHTMLForPost:function(b,f,c,a){var h=this.isPostTopMenu(f,b);var d=h?"TOP":"";var g='&nbsp;<a href="#" class="btn pcol2 _showTagEditBox _rosRestrict _tagRosRestrict _param(EDIT|'+b+"|"+d+') _returnFalse"><span class="text">태그수정</span><i class="aline"></i></a>';var e=this.getTagContentsForPost(c,a,h);if(!e||e.length===0&&!isMemolog){e=[];e.push('<p class="text pcol2">작성된 태그가 없습니다.</p>');e.push('<a href="#" class="btn pcol2 _showTagEditBox _rosRestrict _tagRosRestrict _param(EDIT|'+b+"|"+d+'| INSERT) _returnFalse">태그달기<i class="aline"></i></a>');return e.join("")}if(blogOwner&&!isMemolog){e.push(g)}return e.join("")},getTagContentsForMemolog:function(c,a){var e=[];for(var d=0,b=c.length;d<b;d++){if(c[d]==""){continue}else{e.push('<a href="/PostListByTagName.naver?blogId='+blogId+"&logType=memolog&tagName="+a[d]+"\" class=\"tag pcol1 itemTagfont _setTop\" onclick=\"nclk_v2(this,'tag.list','','')\"><span>#"+c[d]+"</span></a>")}}return e},getTagContentsForPost:function(d,b,g){var f=[];var a=g?"'cat_tag.tag'":"'tag.list'";for(var e=0,c=d.length;e<c;e++){if(d[e]==""){continue}else{f.push('<a href="/PostListByTagName.naver?blogId='+blogId+"&logType=mylog&tagName="+b[e]+'" class="item pcol2 itemTagfont _setTop" onclick="nclk_v2(this,'+a+",'','')\"><span class=\"ell\">#"+d[e]+'</span><i class="pcol2b"></i></a>')}}return f},isPostUpdatable:function(a){var b=utility.getParam(a.className());return b&&b[0]=="true"},isPostTopMenu:function(b,a){return !isMemolog&&b.$value()==$("tagTopName_"+a)},isMemologTopMenu:function(b,a){return isMemolog&&b.$value()==$("tagTopName_"+a)},setTagForLogNo:function(c){for(var f=0;f<c.length;f++){var e=c[f];var d=false;for(var b=0,a=this.tagData.length;b<a;b++){if(this.tagData[b].logno==e.logno){this.tagData[b]=e;d=true;break}}if(!d){this.tagData.push(e)}}},getTagForLogNo:function(a){for(var c=0,b=this.tagData.length;c<b;c++){if(this.tagData[c].logno==a){return utility.decodeURIComponentForJava(this.tagData[c].tagName)}}},showTagEditBox:function(b,g){var a=$$.getSingle("~ div",g);var f=$$.getSingle("input",a);var c=this.getTagForLogNo(b);var d=utility.trim(c);var e=utility.unescapeUnicode(d);f.value="#"+e.split(/[,\s#]+/g).join(", #");$Element(g).hide();$Element(a).show();f=a=g=null},hideTagEditBox:function(b,c){var a=$$.getSingle("~ div",c);if(c.id.indexOf("tagTopName_")==-1||!blogOwner){$Element(c).show()}else{$Element(c).css({display:""})}$Element(a).hide();a=c=null},saveTag:function(b,c){var a=true;a=this.check_tagsvalidate(b,c);if(a){this.realSaveTag(b,c)}},realSaveTag:function(b,e){var a=$$.getSingle("~ div",e);var d=$$.getSingle("input",a);var c=$("saveTagName");this.currentTarget=e;c.logNo.value=b;c.chtagname.value=encodeURIComponent(utility.trim(d.value));if(isMemolog){c.logType.value="memolog"}if(this.isAlreadySubmit){return}this.changeAlreadySubmitValue(true);c.submit();c=d=a=e=null},callbackSaveTagInfo:function(aTagList){this.changeAlreadySubmitValue(false);if(typeof(aTagList)=="string"){aTagList=eval("("+aTagList+")").taglist}if(aTagList.length>0){this.setTagForLogNo(aTagList);for(var i=0,nCount=aTagList.length;i<nCount;i++){var oTag=aTagList[i];if(this.currentTarget!=null){this.hideTagEditBox(oTag.logno,this.currentTarget)}this.setTagList(oTag.logno,oTag.tagName,"resize",$("tagList_"+oTag.logno));this.setTagList(oTag.logno,oTag.tagName,"resize",$("tagTopName_"+oTag.logno))}}},changeAlreadySubmitValue:function(a){this.isAlreadySubmit=a}});var postListTag=new postCommon.Tag();var AdPostList=$Class({$init:function(a,e,b,d,c){this.nLogNo=a;this.nDirectorySeq=e;this.nIndex=b;this.bOldPostOneWeek=d;this.sModifyDateValue=c}});var AdPostObject=$Class({sBlogId:"",sAdPostSecurityParam:"",oContentShareObject:null,bExistAdPost:false,bUseAdPostInSide:false,aPostList:[],nCategoryDirectorySeq:0,nFirstLogNo:"",bPreview:false,bPreviewContent:false,bPreviewSide:false,nAlign:0,nCount:3,sContentSpanIdPrefix:"adPostInjectArea_",sSideSpanIdPrefix:"adPostWidget",bRemoconPreview:false,addAdPostList:function(a,e,b,d,c){this.aPostList.push(new AdPostList(a,e,b,d,c))},isPrintPreview:function(){return this.bPreviewContent||this.bPreviewSide},cannotViewCase:function(){return !this.oContentShareObject&&this.bUseAdPostInSide},isShowAdPost:function(){return !this.bPreview&&this.bExistAdPost&&!this.cannotViewCase()},isCleanSideAdPost:function(){return !this.bExistAdPost&&this.oContentShareObject&&$(this.sSideSpanIdPrefix)&&!this.bPreview}});var InstallBlogAppPush=$Class({$init:function(){$Fn(this._onClick,this).attach(document,"click")},_onClick:function(b){var c=b.element;var a=$Element($$.getSingle("!a",c)?$$.getSingle("!a",c):c);var d;if(typeof(paramUtil)!="undefined"){d=paramUtil.getParam(a.className())}else{d=utility.getParam(a.className())}if(a.hasClass("_installBlogAppPush")){this._push(d,false)}else{if(a.hasClass("_installBlogAppPushClose")){this._closeLayer(d)}else{if(a.hasClass("_installBlogAppPushRetry")){this._push(d,true)}}}if(a.hasClass("_stopIntallAppEvent")){b.stop()}},_push:function(c,b){var d="";var a=c[0];if(c.length>=2){d=c[1]}if(a=="true"){this._callPush(d,b)}else{this._login()}},_login:function(){var a=encodeURI(location.protocol+"//"+location.host+"/ReloadOpenerAndClose.naver");window.open("https://nid.naver.com/nidlogin.login?mode=form&svctype=64&url="+a,"login","width=400,height=260,location=no,resizable=no")},_callPush:function(b,a){new $Ajax("/InstallBlogAppPushAsync.naver",{method:"POST",onload:$Fn(function(c){this._showLayer(c,b,a)},this).bind()}).request()},_showLayer:function(a,c,b){if(a.text()=="success"){$Element("installBlogAppPush"+c).show();$Fn(this._hideInstallBlogAppPushNews,this).attach($$("#myBlogNews ._installBlogAppPushClose"),"keydown");if(b){alert("알림을 다시 전송했습니다.")}}else{if(a.text()=="login"){this._login()}else{alert("일시적인 문제로 접속 할 수 없습니다. 잠시 후 다시 시도해주세요.")}}},_closeLayer:function(a){var b="";if(a.length>=2){b=a[1];if(b===""){document.getElementById(a[2]).focus()}}$Element("installBlogAppPush"+b).hide()},_hideInstallBlogAppPushNews:function(a){if(a.key().keyCode!=13){return}$Element("installBlogAppPushNews").hide();$("installBlogAppPush").focus();a.stop()}});var BuyWithMyOwnMoneyController=$Class({$init:function(){$Fn(this._onClickMoreBtn,this).attach($$("._descriptionMoreBtn"),"click");$Fn(this._onClickComponentList,this).attach($$(".not_sponsored_button"),"click");$Fn(this._onClickLink,this).attach($$(".not_sponsored_link"),"click");$Fn(this._onClickItem,this).attach($$(".not_sponsored_item"),"click")},_decideClass:function(){var b=document.getElementsByClassName("description","_descriptionMoreBtn");if(b==null){return}for(var a=0;a<b.length;a++){var c=b[a].getElementsByClassName("paragraph");if(c==null||c.length!==1){continue}if(getComputedStyle(c[0]).lineHeight<getComputedStyle(c[0]).height){b[a].classList.add("is_ellipsis")}}},_onClickMoreBtn:function(b){var c=b.element;var a=$Element(cssquery.getSingle("!div",c)?cssquery.getSingle("!div",c):c);if(a.hasClass("_descriptionMoreBtn")){a.removeClass("is_ellipsis")}},_onClickComponentList:function(b){var c=b.element;var a=$Element(cssquery.getSingle("!button",c)?cssquery.getSingle("!button",c):c);if(a.hasClass("not_sponsored_button")){a._element.ariaExpanded=a._element.ariaExpanded==="false"}if(a._element.ariaExpanded==="true"){nclk_v2(this,"pst.topprfopen","","")}else{nclk_v2(this,"pst.topprfclose","","")}},_onClickLink:function(b){var f=b.element;var c=f.closest(".not_sponsored_summary");var e=c.getElementsByClassName("not_sponsored_button");if(e.length<1){return}var d=e[0];var a=$Element(cssquery.getSingle("!button",d)?cssquery.getSingle("!button",d):d);if(a.hasClass("not_sponsored_button")){a._element.ariaExpanded="false"}},_onClickItem:function(c){var e=c.element;var b=$Element(cssquery.getSingle("!a",e)?cssquery.getSingle("!a",e):e);var h=46;var a=b._element.href;var d=a.lastIndexOf("#");if(d<0||d===a.length-1){return}var g=document.getElementById(a.slice(d+1));if(g){var f=g.getBoundingClientRect();anchorOffset=window.scrollY+f.top-h;window.scrollTo(window.scrollX,anchorOffset)}c._event.preventDefault()}});var buyWithMyOwnMoneyController=new BuyWithMyOwnMoneyController();if(typeof(window.defineNHNJS)=="undefined"){window.defineNHNJS={}}window.defineNHNJS["PostBottomCommon-628107142_js"]=true;
